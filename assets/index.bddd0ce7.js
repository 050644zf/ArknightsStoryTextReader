import{o as r,c,a as o,b as x,t as _,n as g,r as h,w as f,v as k,F as S,d as w,e as y,$ as E,f as J,g as V,h as $,i as P,j as C,k as L,l as Y}from"./vendor.006e7507.js";const H=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}};H();var Q="data:image/png;base64,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";var v=(t,n)=>{for(const[s,a]of n)t[s]=a;return t};const G={data(){return{}}},W={id:"header",class:"header"},q=o("div",{style:{display:"flex","align-items":"center"}},[o("img",{src:Q,style:{padding:"4px",margin:"4px",height:"80%"}}),o("span",{style:{display:"flex"}},"Arknights Story Text Reader")],-1),Z=o("span",{style:{"font-size":"medium","font-weight":"normal","text-align":"right","margin-right":"20px"}},[o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader/blob/master/reader/CHANGELOG.md",style:{"font-weight":"bold","text-decoration":"underline"}},"wv0.10"),o("br"),x(" by nightsky#3319 on "),o("a",{href:"https://discord.gg/rihq",style:{"font-weight":"bold","text-decoration":"underline"}},"RIHQ")],-1),X=[q,Z];function ee(t,n,s,a,e,i){return r(),c("div",W,X)}var te=v(G,[["render",ee]]);const D=["zh_CN","en_US","ko_KR","ja_JP","zh_TW","Default"];var M=new URLSearchParams(window.location.search),O=M.get("s"),N=window.localStorage.getItem("lang"),B=window.localStorage.getItem("doctor"),j=window.localStorage.getItem("hidetip"),K=window.localStorage.getItem("showDelay"),F=window.localStorage.getItem("hideName"),ne=M.get("f"),se={eventName:"Loading..."};O||(O="zh_CN");(!N||N=="none"||N=="Default")&&(N=navigator.language.replace("-","_"));N=="ja"&&(N="ja_JP");D.indexOf(N)==-1&&(N="en_US");console.log("Current Language: "+N);B||(B="{@nickname}");j||(j=!1);K||(K="y");F||(F="n");var d={urlParams:M,l:N,langList:D,server:O,doctor:B,hidetip:j,showDelay:K,hideName:F,storyFile:ne,storyData:se,intermezzi:["act9d0","act18d0","act18d3"],parseContent(t){if(t){const n=/<color=([\w#]+)>(.+?)<\/color>/gm,s='<span style="color:$1">$2</span>';t=t.replaceAll("{@nickname}",this.doctor),t=t.replaceAll("\\n","<br/>"),t=t.replace(n,s)}return t},focus(){var t=document.getElementsByClassName("storyFocused")[0];t&&t.scrollIntoView({behavior:"smooth",block:"center"}),console.log("focused!")}};const oe={props:["story"],emits:["hidemenu","focusstory","unfoldevent"],data(){return{focused:!1,lang:d.l,server:d.server}},mounted(){d.storyFile==this.story.storyTxt&&(this.focused=!0,this.$emit("unfoldevent"))},methods:{loadStory(t,n){var s="s="+this.server;s=s+"&f="+n,window.location.search=s}}},re=["id"],ie={class:"storycode"},le={class:"storyname"};function ae(t,n,s,a,e,i){return r(),c("div",{class:g({story:!0,storyFocused:e.focused}),id:s.story.storyId,onClick:n[0]||(n[0]=l=>i.loadStory(e.lang,s.story.storyTxt))},[o("div",ie,_(s.story.storyCode)+" "+_(s.story.avgTag),1),o("div",le,_(s.story.storyName),1)],10,re)}var ce=v(oe,[["render",ae]]);const ue={props:["event","eventid"],emits:["hidemenu","focusStory"],data(){return{collapsed:!0}},components:{Storymenu:ce}},de={class:"event"},_e={class:"stories"};function me(t,n,s,a,e,i){const l=h("Storymenu");return r(),c("div",de,[o("div",{class:g({eventname:!0,eventnamehl:!e.collapsed})},_(s.event.name),3),f(o("div",_e,[(r(!0),c(S,null,w(s.event.infoUnlockDatas,(u,m)=>(r(),y(l,{story:u,onUnfoldevent:n[0]||(n[0]=b=>{e.collapsed=!1,t.$emit("focusStory")}),key:m},null,8,["story"]))),128))],512),[[k,!e.collapsed]])])}var he=v(ue,[["render",me]]);const ve={zh_CN:"\u7B80\u4E2D\u670D(CN)",en_US:"Global Server(EN)",ja_JP:"\u65E5\u672C\u30B5\u30FC\u30D0\u30FC(JP)",ko_KR:"\uD55C\uAD6D \uC11C\uBC84(KR)",zh_TW:"\u7E41\u4E2D\u670D(TW)"},pe={zh_CN:"\u5F53\u524D\u8BED\u8A00",en_US:"Current Language",ja_JP:"\u73FE\u5728\u306E\u8A00\u8A9E",ko_KR:"\uD604\uC7AC \uC5B8\uC5B4",zh_TW:"\u7576\u524D\u8A9E\u8A00"},ye={zh_CN:"\u8BF7\u4ECE\u76EE\u5F55\u4E2D\u9009\u62E9\u6545\u4E8B\u67E5\u770B",en_US:"Select the story you wanna view from the menu",ja_JP:"Select the story you wanna view from the menu",ko_KR:"Select the story you wanna view from the menu",zh_TW:"\u8ACB\u5F9E\u76EE\u9304\u4E2D\u9078\u64C7\u6545\u4E8B\u67E5\u770B"},ge={zh_CN:"\u4E3B\u9898\u66F2",en_US:"Maintheme",ja_JP:"Maintheme",ko_KR:"Maintheme",zh_TW:"\u4E3B\u9898\u66F2"},fe={zh_CN:"\u522B\u4F20",en_US:"Sidestory",ja_JP:"Sidestory",ko_KR:"Sidestory",zh_TW:"\u522B\u4F20"},Se={zh_CN:"\u6545\u4E8B\u96C6",en_US:"Storyset",ja_JP:"Storyset",ko_KR:"Storyset",zh_TW:"\u6545\u4E8B\u96C6"},be={zh_CN:"\u5E72\u5458\u5BC6\u5F55",en_US:"Operators' Records",ja_JP:"Operators' Records",ko_KR:"Operators' Records",zh_TW:"\u5E79\u54E1\u5BC6\u9304"},we={zh_CN:"\u8BBE\u7F6E",en_US:"Settings",ja_JP:"Settings",ko_KR:"Settings",zh_TW:"\u8BBE\u7F6E"},ke={zh_CN:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E",en_US:"Reset All Settings",ja_JP:"Reset All Settings",ko_KR:"Reset All Settings",zh_TW:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E"},xe={zh_CN:"\u535A\u58EB\u79F0\u547C",en_US:"Doctor's Name",ja_JP:"\u30C9\u30AF\u30BF\u30FC\u306E\u540D\u524D",ko_KR:"Doctor's Name",zh_TW:"\u535A\u58EB\u7A31\u547C"},Ce={zh_CN:"\u663E\u793A\u7A7A\u767D\u5206\u5272\u884C",en_US:"Show Blank Seperation Line",ja_JP:"Show Blank Seperation Line",ko_KR:"Show Blank Seperation Line",zh_TW:"\u986F\u793A\u7A7A\u767D\u5206\u5272\u884C"},Ne={zh_CN:"\u9690\u85CF\u91CD\u590D\u4EBA\u540D",en_US:"Hide Duplicate Names",ja_JP:"Hide Duplicate Names",ko_KR:"Hide Duplicate Names",zh_TW:"\u96B1\u85CF\u91CD\u8907\u4EBA\u540D"},Le={zh_CN:"\u5E94\u7528\u8BBE\u7F6E",en_US:"Apply Setting",ja_JP:"Apply Setting",ko_KR:"Apply Setting",zh_TW:"\u5E94\u7528\u8BBE\u7F6E"},Ae={zh_CN:"\u8FD4\u56DE\u76EE\u5F55",en_US:"Return to Menu",ja_JP:"Return to Menu",ko_KR:"Return to Menu",zh_TW:"\u8FD4\u56DE\u76EE\u9304"};var z={server:ve,currentLang:pe,selectStory:ye,main:ge,ss:fe,mini:Se,or:be,setting:we,clear:ke,dr:xe,showDelay:Ce,hideName:Ne,save:Le,home:Ae};const Ee={data(){return{data:{},chardict:{},eventList:{},lang:d.l,server:d.server,i18n:z,showMenu:!0,showLangSelect:!1}},created(){E.getJSON("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").done(t=>{this.data=t,E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").done(n=>{this.chardict=n,this.eventList=this.getEventList(this.data,this.chardict)})})},mounted(){d.focus()},methods:{serverSwitch(t){var n="s="+t;window.location.search=n},getEventList(t,n){var s=[],a;for(a in t)if(t[a].entryType=="MAINLINE")s.push(t[a]);else if(t[a].entryType=="ACTIVITY")s.push(t[a]);else if(t[a].entryType=="MINI_ACTIVITY")s.push(t[a]);else if(t[a].entryType=="NONE"){var e=a.split("_")[1],i=a.split("_")[3];t[a].name=n[e].name+" - "+i,s.push(t[a])}return s},focusStory(){d.focus()},home(){window.location.search="?s="+this.server}},components:{Eventmenu:he}},Te={id:"sidebar"},ze={id:"currentLang",class:"currentLang"},Ie=o("span",{class:"material-icons",style:{"margin-right":"5px"}},"language",-1),Re={id:"langSelect",class:"langSelect"},Me=["onClick"],Oe=o("span",{class:"material-icons"}," menu_open ",-1),Be={class:"home"};function je(t,n,s,a,e,i){const l=h("Eventmenu");return r(),c("div",Te,[o("div",{class:g({menuButton:!0,"material-icons":!0,menuButtonR:e.showMenu}),onClick:n[0]||(n[0]=u=>{e.showMenu=!e.showMenu})},"chevron_right",2),o("div",{class:g({sidebar:!0,sidebarhidden:!e.showMenu})},[o("div",ze,[o("div",{style:{display:"flex","align-items":"center","justify-content":"center"},onClick:n[1]||(n[1]=u=>e.showLangSelect=!e.showLangSelect)},[Ie,o("span",null,_(e.i18n.server[e.server]),1)]),f(o("div",Re,[(r(!0),c(S,null,w(e.i18n.server,(u,m,b)=>(r(),c("div",{onClick:A=>i.serverSwitch(m),key:b},_(u),9,Me))),128))],512),[[k,e.showLangSelect]])]),o("div",{class:"homepage",onClick:n[2]||(n[2]=u=>i.home())},[Oe,o("span",Be,_(e.i18n.home[e.lang]),1)]),(r(!0),c(S,null,w(e.eventList,(u,m)=>(r(),y(l,{class:"event",id:u.id,event:u,lang:e.lang,onHidemenu:n[3]||(n[3]=b=>e.showMenu=!1),key:m},null,8,["id","event","lang"]))),128))],2)])}var Ke=v(Ee,[["render",je]]);const Fe={data(){return{doctor:d.doctor,i18n:z,lang:d.l,targetLang:d.l,show:this.doctor=="{@nickname}",hidetip:d.hidetip,showDelay:d.showDelay,hideName:d.hideName,langList:d.langList}},methods:{save(){window.localStorage.setItem("doctor",this.doctor),window.localStorage.setItem("showDelay",this.showDelay),window.localStorage.setItem("hideName",this.hideName),window.localStorage.setItem("lang",this.targetLang),window.location.href=window.location.href},clearSetting(){window.localStorage.clear(),window.location.href=window.location.href},hide(){this.hidetip=!0,window.localStorage.setItem("hidetip",!0)},getJSONFile(){return"https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.lang+"/gamedata/story/"+d.storyFile+".json"},getUserAgent(){return window.navigator.userAgent},getWidth(){return E(window).width()}}},$e={id:"setting"},Pe={class:"warmtip",style:{"background-color":"rgb(255, 255, 0)",color:"#000",padding:"5px"}},De=o("span",{style:{float:"left","margin-left":"20px"}},[x("If you like this project, please give me a star "),o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader",style:{color:"rgb(32, 32, 184)"}},"here"),x("!"),o("br"),x("If you have any issues or feedbacks please summit them "),o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader/issues",style:{color:"rgb(32, 32, 184)"}},"here"),x(".")],-1),Ue=o("div",{style:{clear:"both"}},null,-1),Je={class:"settingtitle"},Ve=o("span",{class:"material-icons clearbutton",style:{float:"right",padding:"4px"}},"delete",-1),Ye={class:"settingtitle",style:{float:"right","font-weight":"normal","font-size":"15px"}},He=o("div",{style:{clear:"both"}},null,-1),Qe={class:g({settingoptions:!0})},Ge=o("span",{class:"material-icons"},"public",-1),We=o("div",{style:{clear:"both"}},null,-1),qe={style:{float:"left"}},Ze=o("div",{style:{clear:"both"}},null,-1),Xe={style:{float:"left"}},et=o("div",{style:{clear:"both"}},null,-1),tt={style:{float:"left"}},nt=o("div",{style:{clear:"both"}},null,-1),st={style:{float:"left","font-weight":"bold"}},ot=o("span",{class:"material-icons",style:{float:"left"}},"save_alt",-1),rt=o("div",{style:{clear:"both"}},null,-1),it=o("span",{style:{"font-size":"10px","font-weight":"bold",color:"dimgray"}}," Developer Info/Options (Please attach these info with your issues) ",-1),lt={style:{"font-size":"5px",color:"dimgray"}},at=x(" Current JsonFile:"),ct=o("br",null,null,-1),ut=o("br",null,null,-1),dt=x(" Browser Info:"),_t=o("br",null,null,-1),mt=o("br",null,null,-1),ht=o("br",null,null,-1);function vt(t,n,s,a,e,i){return r(),c("div",$e,[f(o("div",Pe,[De,o("span",{class:"material-icons",style:{float:"right"},onClick:n[0]||(n[0]=l=>i.hide())},"clear"),Ue],512),[[k,!e.hidetip]]),o("div",{class:g({setting:!0,settingshow:e.show})},[o("span",{class:g({"material-icons":!0}),onClick:n[1]||(n[1]=l=>e.show=!e.show),id:"settingbutton"}," settings "),o("span",Je,_(e.i18n.setting[e.lang]),1),o("div",{class:"clear",onClick:n[2]||(n[2]=l=>i.clearSetting())},[Ve,o("span",Ye,_(e.i18n.clear[e.lang]),1)]),He,f(o("div",Qe,[Ge,f(o("select",{"onUpdate:modelValue":n[3]||(n[3]=l=>e.targetLang=l)},[(r(!0),c(S,null,w(e.langList,l=>(r(),c("option",{key:l},_(l),1))),128))],512),[[J,e.targetLang]]),We,o("span",qe,_(e.i18n.dr[e.lang])+": ",1),f(o("input",{class:"textbox","onUpdate:modelValue":n[4]||(n[4]=l=>e.doctor=l),style:{float:"left"}},null,512),[[V,e.doctor]]),Ze,o("span",Xe,_(e.i18n.showDelay[e.lang])+": ",1),f(o("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":n[5]||(n[5]=l=>e.showDelay=l),"true-value":"y","false-value":"n",style:{float:"left"}},null,512),[[$,e.showDelay]]),et,o("span",tt,_(e.i18n.hideName[e.lang])+"(beta): ",1),f(o("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=l=>e.hideName=l),"true-value":"y","false-value":"n",style:{float:"left"}},null,512),[[$,e.hideName]]),nt,o("div",{class:"save",onClick:n[7]||(n[7]=l=>i.save())},[o("span",st,_(e.i18n.save[e.lang]),1),ot,rt]),it,o("div",lt,[at,ct,x(" "+_(i.getJSONFile()),1),ut,dt,_t,x(" "+_(i.getUserAgent()),1),mt,x(" Browser width: "+_(i.getWidth()),1),ht])],512),[[k,e.show]])],2)])}var pt=v(Fe,[["render",vt]]);const yt={data(){return{line:this.inputline,hideName:!1}},mounted(){this.hideName=this.isHideName()},props:{inputline:Object,story:Object,lidx:Number},methods:{parseContent(t){return d.parseContent(t)},isHideName(){if(this.lidx=="0"||d.hideName=="n"||!this.line)return!1;var t=this.story[this.lidx-1];return!!(t.prop=="name"&&t.attributes&&this.line.attributes&&(console.log(t),t.attributes.name==this.line.attributes.name))}}},gt={class:"textblock"},ft=["innerHTML"];function St(t,n,s,a,e,i){return r(),c("div",gt,[o("div",{class:g({nameblock:!0,hideName:e.hideName})},_(e.line.attributes.name),3),o("div",{class:"contentblock",innerHTML:i.parseContent(e.line.attributes.content)},null,8,ft)])}var bt=v(yt,[["render",St]]);const wt={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(t){return d.parseContent(t)}}},kt=["innerHTML"];function xt(t,n,s,a,e,i){return r(),c("div",{class:g(e.line.prop),style:P({"text-align":e.line.attributes.alignment}),innerHTML:i.parseContent(e.line.attributes.text)},null,14,kt)}var Ct=v(wt,[["render",xt]]);const Nt={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(t){return d.parseContent(t)},jumpTo(t){var n=document.getElementById(t);n.scrollIntoView({behavior:"smooth",block:"center"})},addClass(t,n){var s=document.getElementById(t);s.classList.add(n)},removeClass(t,n){var s=document.getElementById(t);s.classList.remove(n)}}},Lt=["onClick","onMouseover","onMouseout","innerHTML"];function At(t,n,s,a,e,i){return r(),c("div",{class:g(e.line.prop)},[(r(!0),c(S,null,w(e.line.attributes.values.split(";"),(l,u)=>(r(),c("div",{key:l,class:"option",onClick:m=>i.jumpTo(e.line.targetLine["option"+l]),onMouseover:m=>i.addClass(e.line.targetLine["option"+l],"PredicateFocused"),onMouseout:m=>i.removeClass(e.line.targetLine["option"+l],"PredicateFocused"),innerHTML:i.parseContent(e.line.attributes.options.split(";")[u])},null,40,Lt))),128))],2)}var Et=v(Nt,[["render",At]]);const Tt={data(){return{line:this.inputline}},props:{inputline:Object}},zt={key:0,class:"optText"};function It(t,n,s,a,e,i){return r(),c("div",{class:g(e.line.prop)},[e.line.endOfOpt?C("",!0):(r(),c("div",zt,"Options: "+_(e.line.attributes.references.replaceAll(";"," ")),1))],2)}var Rt=v(Tt,[["render",It]]);const Mt={data(){return{line:this.inputline}},props:{inputline:Object}};function Ot(t,n,s,a,e,i){return r(),c("div",{class:g(e.line.prop),style:P({height:e.line.attributes.time*30+"px"})},null,6)}var Bt=v(Mt,[["render",Ot]]);const jt={data(){return{line:this.inputline}},props:{inputline:Object}},Kt=["src"];function Ft(t,n,s,a,e,i){return r(),c("img",{class:"Image",src:"https://aceship.github.io/AN-EN-Tags/img/avg/images/"+e.line.attributes.image+".png"},null,8,Kt)}var $t=v(jt,[["render",Ft]]);const Pt={data(){return{data:d.storyData,path:d.storyFile,lang:d.l,server:d.server,doctor:d.doctor,i18n:z,showDelay:d.showDelay}},created(){this.path?E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/gamedata/story/"+this.path+".json").done(t=>this.data=t).fail(t=>{this.data={eventName:"Error on loading json file: "+this.path+"! If this is a new story, please contact the developer in github issue or discord to update the database."}}):this.data={eventName:"< - "+z.selectStory[this.lang]}},updated(){if(d.urlParams.get("warp")){var t=document.getElementById(d.urlParams.get("warp"));t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.setProperty("background-color","#f4433633"))}d.focus()},methods:{jumpTo(t){var n=document.getElementById(t);n.scrollIntoView({behavior:"smooth",block:"center"})},changeColor(t,n){var s=document.getElementById(t);setInterval(s.style.setProperty("background-color",n),500)},getURL(t,n,s){return"?s="+t+"&f="+n+"&warp=line"+s},parseContent(t){return d.parseContent(t)}},components:{Nameline:bt,Subtitle:Ct,Decision:Et,Predicate:Rt,Delay:Bt,Showimg:$t}},Dt={id:"content"},Ut={class:"storydata",id:"storydata"},Jt=["id"],Vt=["href"],Yt=o("div",{style:{clear:"both"}},null,-1);function Ht(t,n,s,a,e,i){const l=h("Nameline"),u=h("Subtitle"),m=h("Decision"),b=h("Predicate"),A=h("Delay"),T=h("Showimg");return r(),c("div",Dt,[o("div",Ut,_(e.data.eventName)+" "+_(e.data.storyCode)+" "+_(e.data.avgTag)+" "+_(e.data.storyName),1),(r(!0),c(S,null,w(e.data.storyList,(p,R)=>(r(),c("div",{key:p.id,class:"line",id:"line"+p.id},[o("a",{href:i.getURL(e.server,e.path,p.id),class:"linkButton material-icons"},"link",8,Vt),p.prop=="name"?(r(),y(l,{key:0,inputline:p,lidx:R,story:e.data.storyList},null,8,["inputline","lidx","story"])):C("",!0),p.prop=="Subtitle"?(r(),y(u,{key:1,inputline:p},null,8,["inputline"])):C("",!0),p.prop=="Decision"?(r(),y(m,{key:2,inputline:p},null,8,["inputline"])):C("",!0),p.prop=="Predicate"?(r(),y(b,{key:3,inputline:p},null,8,["inputline"])):C("",!0),p.prop=="Delay"&&e.showDelay=="y"?(r(),y(A,{key:4,inputline:p},null,8,["inputline"])):C("",!0),p.prop=="Image"&&p.attributes.image?(r(),y(T,{key:5,inputline:p},null,8,["inputline"])):C("",!0),Yt],8,Jt))),128))])}var Qt=v(Pt,[["render",Ht]]);const Gt={methods:{scrollToTop(){document.getElementById("storydata").scrollIntoView({behavior:"smooth",block:"center"})}}};function Wt(t,n,s,a,e,i){return r(),c("span",{class:"material-icons topButton",onClick:n[0]||(n[0]=l=>i.scrollToTop())},"vertical_align_top")}var qt=v(Gt,[["render",Wt]]);const Zt={props:{item:Object,iidx:Number,focus:Boolean},emits:["focusme"]},Xt={class:"itemname"};function en(t,n,s,a,e,i){return r(),c("div",{class:g({navitem:!0,itemfocused:s.focus}),onClick:n[0]||(n[0]=l=>{t.$emit("focusme")})},[o("div",{class:g([s.item.icon,"itemicon"])},null,2),o("span",Xt,_(s.item.title),1)],2)}var tn=v(Zt,[["render",en]]);const nn={data(){return{navi:{maintheme:{icon:"terminal-maintheme",title:"Maintheme"},intermezzi:{icon:"terminal-intermezzi",title:"Intermezzi"},sidestory:{icon:"terminal-sidestory",title:"Sidestory"},storyset:{icon:"terminal-storyset",title:"Storyset"},or:{icon:"terminal-record",title:"Records"}}}},emits:["focuson"],props:{focus:Number},components:{Navitem:tn}},sn={class:"navibar"};function on(t,n,s,a,e,i){const l=h("Navitem");return r(),c("div",sn,[(r(!0),c(S,null,w(e.navi,(u,m,b)=>(r(),y(l,{key:m,item:u,onFocusme:A=>{s.focus=b,t.$emit("focuson",b)},focus:s.focus==b},null,8,["item","onFocusme","focus"]))),128))])}var rn=v(nn,[["render",on]]);const ln={data(){return{server:d.server}},emits:["focusme"],props:{eventData:Object,showStory:Boolean},methods:{getAvatar(){return"https://aceship.github.io/AN-EN-Tags/img/avatars/char_"+this.eventData.cid+"_"+this.eventData.cin+".png"},loadStory(t){var n="s="+this.server;n=n+"&f="+t,window.location.search=n}}},an=["src"],cn={class:"operatorname"},un={class:"setnumber"},dn={class:"orstories"},_n=["onClick"];function mn(t,n,s,a,e,i){return r(),c("div",{class:g({oritem:!0,orfocused:s.showStory})},[o("div",{class:"orcard",onClick:n[0]||(n[0]=l=>t.$emit("focusme"))},[o("img",{src:i.getAvatar()},null,8,an),o("div",cn,_(s.eventData.name),1),o("div",un,"#"+_(s.eventData.set),1)]),f(o("div",dn,[(r(!0),c(S,null,w(s.eventData.infoUnlockDatas,(l,u)=>(r(),c("div",{class:"orstory",key:u,onClick:m=>i.loadStory(l.storyTxt)},_(u)+". "+_(l.storyName),9,_n))),128))],512),[[k,s.showStory]])],2)}var hn=v(ln,[["render",mn]]);const vn={data(){return{focus:-1}},props:{eventList:Array},components:{Oritem:hn},methods:{focuson(t){this.focus==t?this.focus=-1:this.focus=t}}},pn={class:"record"};function yn(t,n,s,a,e,i){const l=h("Oritem");return r(),c("div",pn,[(r(!0),c(S,null,w(s.eventList,(u,m)=>(r(),y(l,{key:m,eventData:u,"show-story":e.focus==m,onFocusme:b=>i.focuson(m)},null,8,["eventData","show-story","onFocusme"]))),128))])}var gn=v(vn,[["render",yn]]);const fn={props:["story"],emits:["hidemenu","focusstory","unfoldevent"],data(){return{focused:!1,lang:d.l,server:d.server}},mounted(){d.storyFile==this.story.storyTxt&&(this.focused=!0,this.$emit("unfoldevent"))},methods:{loadStory(t,n){var s="s="+this.server;s=s+"&f="+n,window.location.search=s}}},Sn=["id"],bn={class:"storycode"},wn={class:"storyname"};function kn(t,n,s,a,e,i){return r(),c("div",{class:g({story:!0,storyFocused:e.focused}),id:s.story.storyId,onClick:n[0]||(n[0]=l=>i.loadStory(e.lang,s.story.storyTxt))},[o("div",bn,_(s.story.storyCode)+" "+_(s.story.avgTag),1),o("div",wn,_(s.story.storyName),1)],10,Sn)}var xn=v(fn,[["render",kn]]);const Cn={props:["event","eventid"],emits:["hidemenu","focusStory"],data(){return{collapsed:!0}},components:{Storymenu:xn}},Nn={class:"event"},Ln={class:"stories"};function An(t,n,s,a,e,i){const l=h("Storymenu");return r(),c("div",Nn,[o("div",{class:g({eventname:!0,eventnamehl:!e.collapsed}),onClick:n[0]||(n[0]=u=>e.collapsed=!e.collapsed)},_(s.event.name),3),f(o("div",Ln,[(r(!0),c(S,null,w(s.event.infoUnlockDatas,(u,m)=>(r(),y(l,{story:u,onUnfoldevent:n[1]||(n[1]=b=>{e.collapsed=!1,t.$emit("focusStory")}),key:m},null,8,["story"]))),128))],512),[[k,!e.collapsed]])])}var I=v(Cn,[["render",An]]);const En={props:{eventList:Object},components:{Eventmenu:I}},Tn={class:"maintheme"};function zn(t,n,s,a,e,i){const l=h("Eventmenu");return r(),c("div",Tn,[(r(!0),c(S,null,w(s.eventList,(u,m)=>(r(),y(l,{key:m,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var In=v(En,[["render",zn]]);const Rn={props:{eventList:Object},components:{Eventmenu:I}},Mn={class:"intermezzi"};function On(t,n,s,a,e,i){const l=h("Eventmenu");return r(),c("div",Mn,[(r(!0),c(S,null,w(s.eventList,(u,m)=>(r(),y(l,{key:m,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var Bn=v(Rn,[["render",On]]);const jn={props:{eventList:Object},components:{Eventmenu:I}},Kn={class:"sidestory"};function Fn(t,n,s,a,e,i){const l=h("Eventmenu");return r(),c("div",Kn,[(r(!0),c(S,null,w(s.eventList,(u,m)=>(r(),y(l,{key:m,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var $n=v(jn,[["render",Fn]]);const Pn={props:{eventList:Object},components:{Eventmenu:I}},Dn={class:"storyset"};function Un(t,n,s,a,e,i){const l=h("Eventmenu");return r(),c("div",Dn,[(r(!0),c(S,null,w(s.eventList,(u,m)=>(r(),y(l,{key:m,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var Jn=v(Pn,[["render",Un]]);const Vn={data(){return{focus:0,i18n:z,lang:d.l,server:d.server,chardict:{},intermezzi:d.intermezzi,eventList:{},data:{},showLangSelect:!1}},created(){E.getJSON("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").done(t=>{this.data=t,E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").done(n=>{this.chardict=n,this.eventList=this.getEventList(this.data,this.chardict)})})},components:{Navibar:rn,Maintheme:In,Intermezzi:Bn,Sidestory:$n,Storyset:Jn,Or:gn},methods:{serverSwitch(t){var n="s="+t;window.location.search=n},getEventList(t,n){var s={maintheme:[],intermezzi:[],sidestory:[],storyset:[],or:[]},a;for(a in t)if(t[a].entryType=="MAINLINE")s.maintheme.push(t[a]);else if(t[a].entryType=="ACTIVITY")this.intermezzi.indexOf(a)==-1?s.sidestory.push(t[a]):s.intermezzi.push(t[a]);else if(t[a].entryType=="MINI_ACTIVITY")s.storyset.push(t[a]);else if(t[a].entryType=="NONE"){var e=a.split("_")[1],i=a.split("_")[3];t[a].name=n[e].name,t[a].cid=n[e].id,t[a].cin=e,t[a].set=i,s.or.push(t[a])}return s.intermezzi.sort(function(l,u){return l.startTime-u.startTime}),s.sidestory.sort(function(l,u){return l.startTime-u.startTime}),s.storyset.sort(function(l,u){return l.startTime-u.startTime}),s}}},Yn={class:"menupage"},Hn={id:"currentLang",class:"currentLang"},Qn=o("span",{class:"material-icons",style:{"margin-right":"5px"}},"language",-1),Gn={id:"langSelect",class:"langSelect"},Wn=["onClick"],qn=o("br",null,null,-1);function Zn(t,n,s,a,e,i){const l=h("Navibar"),u=h("Maintheme"),m=h("Intermezzi"),b=h("Sidestory"),A=h("Storyset"),T=h("Or");return r(),c("div",Yn,[o("div",Hn,[o("div",{style:{display:"flex","align-items":"center","justify-content":"center"},onClick:n[0]||(n[0]=p=>e.showLangSelect=!e.showLangSelect)},[Qn,o("span",null,_(e.i18n.server[e.server]),1)]),f(o("div",Gn,[(r(!0),c(S,null,w(e.i18n.server,(p,R,U)=>(r(),c("div",{onClick:ss=>i.serverSwitch(R),key:U},_(p),9,Wn))),128))],512),[[k,e.showLangSelect]])]),qn,L(l,{focus:e.focus,onFocuson:n[1]||(n[1]=p=>e.focus=p)},null,8,["focus"]),f(L(u,{eventList:e.eventList.maintheme},null,8,["eventList"]),[[k,e.focus==0]]),f(L(m,{eventList:e.eventList.intermezzi},null,8,["eventList"]),[[k,e.focus==1]]),f(L(b,{eventList:e.eventList.sidestory},null,8,["eventList"]),[[k,e.focus==2]]),f(L(A,{eventList:e.eventList.storyset},null,8,["eventList"]),[[k,e.focus==3]]),f(L(T,{eventList:e.eventList.or},null,8,["eventList"]),[[k,e.focus==4]])])}var Xn=v(Vn,[["render",Zn]]);const es={data(){return{storyData:{},storyFile:d.storyFile,lang:d.l,server:d.server}},components:{Header:te,Menu:Ke,Content:Qt,Settings:pt,Topbtn:qt,Menupage:Xn},methods:{}};function ts(t,n,s,a,e,i){const l=h("Header"),u=h("Menu"),m=h("Settings"),b=h("Menupage"),A=h("Content"),T=h("Topbtn");return r(),c(S,null,[L(l),e.storyFile?(r(),y(u,{key:0})):C("",!0),L(m),e.storyFile?C("",!0):(r(),y(b,{key:1})),e.storyFile?(r(),y(A,{key:2})):C("",!0),L(T)],64)}var ns=v(es,[["render",ts]]);Y(ns).mount("#ASTR");console.log(d.urlParams.get("f"));
