import{o as r,c,a as o,b as x,t as h,n as g,r as m,w as S,v as N,F as f,d as b,e as w,$ as E,f as H,g as $,h as U,i as D,j as L,k as Y,l as A,m as Q}from"./vendor.a8dac9fa.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}};G();var W="data:image/png;base64,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";var p=(n,t)=>{for(const[s,a]of t)n[s]=a;return n};const q={data(){return{}}},Z={id:"header",class:"header"},X=o("div",{style:{display:"flex","align-items":"center"}},[o("img",{src:W,style:{padding:"4px",margin:"4px",height:"80%"}}),o("span",{style:{display:"flex"}},"Arknights Story Text Reader")],-1),ee=o("span",{style:{"font-size":"medium","font-weight":"normal","text-align":"right","margin-right":"20px"}},[o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader/blob/master/reader/CHANGELOG.md",style:{"font-weight":"bold","text-decoration":"underline"}},"wv0.11"),o("br"),x(" by nightsky#3319 on "),o("a",{href:"https://discord.gg/rihq",style:{"font-weight":"bold","text-decoration":"underline"}},"RIHQ")],-1),te=[X,ee];function ne(n,t,s,a,e,i){return r(),c("div",Z,te)}var se=p(q,[["render",ne]]);const P=["zh_CN","en_US","ko_KR","ja_JP","zh_TW","Default"];var M=new URLSearchParams(window.location.search),O=M.get("s"),T=window.localStorage.getItem("lang"),j=window.localStorage.getItem("doctor"),B=window.localStorage.getItem("hidetip"),K=window.localStorage.getItem("showDelay"),F=window.localStorage.getItem("hideName"),oe=M.get("f"),re={eventName:"Loading..."};O||(O="zh_CN");(!T||T=="none"||T=="Default")&&(T=navigator.language.replace("-","_"));T=="ja"&&(T="ja_JP");P.indexOf(T)==-1&&(T="en_US");console.log("Current Language: "+T);j||(j="{@nickname}");B||(B=!1);K||(K="y");F||(F="n");var d={urlParams:M,l:T,langList:P,server:O,doctor:j,hidetip:B,showDelay:K,hideName:F,storyFile:oe,storyData:re,intermezzi:["act9d0","act18d0","act18d3"],parseContent(n){if(n){const t=/<color=([\w#]+)>(.+?)<\/color>/gm,s='<span style="color:$1">$2</span>';n=n.replaceAll("{@nickname}",this.doctor),n=n.replaceAll("\\n","<br/>"),n=n.replace(t,s)}return n},focus(){var n=document.getElementsByClassName("storyFocused")[0];n&&n.scrollIntoView({behavior:"smooth",block:"center"}),console.log("focused!")}};const ie={props:["story"],emits:["hidemenu","focusstory","unfoldevent"],data(){return{focused:!1,lang:d.l,server:d.server}},mounted(){d.storyFile==this.story.storyTxt&&(this.focused=!0,this.$emit("unfoldevent"))},methods:{loadStory(n){var t="s="+this.server;t=t+"&f="+n,window.location.search=t}}},le=["id"],ae={class:"storycode"},ce={class:"storyname"};function ue(n,t,s,a,e,i){return r(),c("div",{class:g({story:!0,storyFocused:e.focused}),id:s.story.storyId,onClick:t[0]||(t[0]=l=>i.loadStory(e.lang,s.story.storyTxt))},[o("div",ae,h(s.story.storyCode)+" "+h(s.story.avgTag),1),o("div",ce,h(s.story.storyName),1)],10,le)}var de=p(ie,[["render",ue]]);const _e={props:["event","eventid"],emits:["hidemenu","focusStory"],data(){return{collapsed:!0}},components:{Storymenu:de}},he={class:"event"},me={class:"stories"};function ve(n,t,s,a,e,i){const l=m("Storymenu");return r(),c("div",he,[o("div",{class:g({eventname:!0,eventnamehl:!e.collapsed})},h(s.event.name),3),S(o("div",me,[(r(!0),c(f,null,b(s.event.infoUnlockDatas,(u,_)=>(r(),w(l,{story:u,onUnfoldevent:t[0]||(t[0]=y=>{e.collapsed=!1,n.$emit("focusStory")}),key:_},null,8,["story"]))),128))],512),[[N,!e.collapsed]])])}var pe=p(_e,[["render",ve]]);const ye={zh_CN:"\u7B80\u4E2D\u670D(CN)",en_US:"Global Server(EN)",ja_JP:"\u65E5\u672C\u30B5\u30FC\u30D0\u30FC(JP)",ko_KR:"\uD55C\uAD6D \uC11C\uBC84(KR)",zh_TW:"\u7E41\u4E2D\u670D(TW)"},ge={zh_CN:"\u5F53\u524D\u8BED\u8A00",en_US:"Current Language",ja_JP:"\u73FE\u5728\u306E\u8A00\u8A9E",ko_KR:"\uD604\uC7AC \uC5B8\uC5B4",zh_TW:"\u7576\u524D\u8A9E\u8A00"},fe={zh_CN:"\u8BF7\u4ECE\u76EE\u5F55\u4E2D\u9009\u62E9\u6545\u4E8B\u67E5\u770B",en_US:"Select the story you wanna view from the menu",ja_JP:"Select the story you wanna view from the menu",ko_KR:"Select the story you wanna view from the menu",zh_TW:"\u8ACB\u5F9E\u76EE\u9304\u4E2D\u9078\u64C7\u6545\u4E8B\u67E5\u770B"},Se={zh_CN:"\u4E3B\u9898\u66F2",en_US:"Maintheme",ja_JP:"Maintheme",ko_KR:"Maintheme",zh_TW:"\u4E3B\u9898\u66F2"},be={zh_CN:"\u522B\u4F20",en_US:"Sidestory",ja_JP:"Sidestory",ko_KR:"Sidestory",zh_TW:"\u522B\u4F20"},we={zh_CN:"\u6545\u4E8B\u96C6",en_US:"Storyset",ja_JP:"Storyset",ko_KR:"Storyset",zh_TW:"\u6545\u4E8B\u96C6"},ke={zh_CN:"\u5E72\u5458\u5BC6\u5F55",en_US:"Operators' Records",ja_JP:"Operators' Records",ko_KR:"Operators' Records",zh_TW:"\u5E79\u54E1\u5BC6\u9304"},xe={zh_CN:"\u8BBE\u7F6E",en_US:"Settings",ja_JP:"Settings",ko_KR:"Settings",zh_TW:"\u8BBE\u7F6E"},Ce={zh_CN:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E",en_US:"Reset All Settings",ja_JP:"Reset All Settings",ko_KR:"Reset All Settings",zh_TW:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E"},Ne={zh_CN:"\u535A\u58EB\u79F0\u547C",en_US:"Doctor's Name",ja_JP:"\u30C9\u30AF\u30BF\u30FC\u306E\u540D\u524D",ko_KR:"Doctor's Name",zh_TW:"\u535A\u58EB\u7A31\u547C"},Le={zh_CN:"\u663E\u793A\u7A7A\u767D\u5206\u5272\u884C",en_US:"Show Blank Seperation Line",ja_JP:"Show Blank Seperation Line",ko_KR:"Show Blank Seperation Line",zh_TW:"\u986F\u793A\u7A7A\u767D\u5206\u5272\u884C"},Ae={zh_CN:"\u9690\u85CF\u91CD\u590D\u4EBA\u540D",en_US:"Hide Duplicate Names",ja_JP:"Hide Duplicate Names",ko_KR:"Hide Duplicate Names",zh_TW:"\u96B1\u85CF\u91CD\u8907\u4EBA\u540D"},Te={zh_CN:"\u5E94\u7528\u8BBE\u7F6E",en_US:"Apply Setting",ja_JP:"Apply Setting",ko_KR:"Apply Setting",zh_TW:"\u5E94\u7528\u8BBE\u7F6E"},Ee={zh_CN:"\u8FD4\u56DE\u76EE\u5F55",en_US:"Return to Menu",ja_JP:"Return to Menu",ko_KR:"Return to Menu",zh_TW:"\u8FD4\u56DE\u76EE\u9304"};var I={server:ye,currentLang:ge,selectStory:fe,main:Se,ss:be,mini:we,or:ke,setting:xe,clear:Ce,dr:Ne,showDelay:Le,hideName:Ae,save:Te,home:Ee};const ze={data(){return{data:{},chardict:{},eventList:{},lang:d.l,server:d.server,i18n:I,showMenu:!0,showLangSelect:!1}},created(){E.getJSON("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").done(n=>{this.data=n,E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").done(t=>{this.chardict=t,this.eventList=this.getEventList(this.data,this.chardict)})})},mounted(){d.focus()},methods:{serverSwitch(n){var t="s="+n;window.location.search=t},getEventList(n,t){var s=[],a;for(a in n)if(n[a].entryType=="MAINLINE")s.push(n[a]);else if(n[a].entryType=="ACTIVITY")s.push(n[a]);else if(n[a].entryType=="MINI_ACTIVITY")s.push(n[a]);else if(n[a].entryType=="NONE"){var e=a.split("_")[1],i=a.split("_")[3];n[a].name=t[e].name+" - "+i,s.push(n[a])}return s},focusStory(){d.focus()},home(){window.location.search="?s="+this.server}},components:{Eventmenu:pe}},Ie={id:"sidebar"},Re={id:"currentLang",class:"currentLang"},Me=o("span",{class:"material-icons",style:{"margin-right":"5px"}},"language",-1),Oe={id:"langSelect",class:"langSelect"},je=["onClick"],Be=o("span",{class:"material-icons"}," menu_open ",-1),Ke={class:"home"};function Fe(n,t,s,a,e,i){const l=m("Eventmenu");return r(),c("div",Ie,[o("div",{class:g({menuButton:!0,"material-icons":!0,menuButtonR:e.showMenu}),onClick:t[0]||(t[0]=u=>{e.showMenu=!e.showMenu})},"chevron_right",2),o("div",{class:g({sidebar:!0,sidebarhidden:!e.showMenu})},[o("div",Re,[o("div",{style:{display:"flex","align-items":"center","justify-content":"center"},onClick:t[1]||(t[1]=u=>e.showLangSelect=!e.showLangSelect)},[Me,o("span",null,h(e.i18n.server[e.server]),1)]),S(o("div",Oe,[(r(!0),c(f,null,b(e.i18n.server,(u,_,y)=>(r(),c("div",{onClick:k=>i.serverSwitch(_),key:y},h(u),9,je))),128))],512),[[N,e.showLangSelect]])]),o("div",{class:"homepage",onClick:t[2]||(t[2]=u=>i.home())},[Be,o("span",Ke,h(e.i18n.home[e.lang]),1)]),(r(!0),c(f,null,b(e.eventList,(u,_)=>(r(),w(l,{class:"event",id:u.id,event:u,lang:e.lang,onHidemenu:t[3]||(t[3]=y=>e.showMenu=!1),key:_},null,8,["id","event","lang"]))),128))],2)])}var $e=p(ze,[["render",Fe]]);const Ue={data(){return{doctor:d.doctor,i18n:I,lang:d.l,targetLang:d.l,show:this.doctor=="{@nickname}",hidetip:d.hidetip,showDelay:d.showDelay,hideName:d.hideName,langList:d.langList}},methods:{save(){window.localStorage.setItem("doctor",this.doctor),window.localStorage.setItem("showDelay",this.showDelay),window.localStorage.setItem("hideName",this.hideName),window.localStorage.setItem("lang",this.targetLang),window.location.href=window.location.href},clearSetting(){window.localStorage.clear(),window.location.href=window.location.href},hide(){this.hidetip=!0,window.localStorage.setItem("hidetip",!0)},getJSONFile(){return"https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.lang+"/gamedata/story/"+d.storyFile+".json"},getUserAgent(){return window.navigator.userAgent},getWidth(){return E(window).width()}}},De={id:"setting"},Pe={class:"warmtip",style:{"background-color":"rgb(255, 255, 0)",color:"#000",padding:"5px"}},Je=o("span",{style:{float:"left","margin-left":"20px"}},[x("If you like this project, please give me a star "),o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader",style:{color:"rgb(32, 32, 184)"}},"here"),x("!"),o("br"),x("If you have any issues or feedbacks please summit them "),o("a",{href:"https://github.com/050644zf/ArknightsStoryTextReader/issues",style:{color:"rgb(32, 32, 184)"}},"here"),x(".")],-1),Ve=o("div",{style:{clear:"both"}},null,-1),He={class:"settingtitle"},Ye=o("span",{class:"material-icons clearbutton",style:{float:"right",padding:"4px"}},"delete",-1),Qe={class:"settingtitle",style:{float:"right","font-weight":"normal","font-size":"15px"}},Ge=o("div",{style:{clear:"both"}},null,-1),We={class:g({settingoptions:!0})},qe=o("span",{class:"material-icons"},"public",-1),Ze=o("div",{style:{clear:"both"}},null,-1),Xe={style:{float:"left"}},et=o("div",{style:{clear:"both"}},null,-1),tt={style:{float:"left"}},nt=o("div",{style:{clear:"both"}},null,-1),st={style:{float:"left"}},ot=o("div",{style:{clear:"both"}},null,-1),rt={style:{float:"left","font-weight":"bold"}},it=o("span",{class:"material-icons",style:{float:"left"}},"save_alt",-1),lt=o("div",{style:{clear:"both"}},null,-1),at=o("span",{style:{"font-size":"10px","font-weight":"bold",color:"dimgray"}}," Developer Info/Options (Please attach these info with your issues) ",-1),ct={style:{"font-size":"5px",color:"dimgray"}},ut=x(" Current JsonFile:"),dt=o("br",null,null,-1),_t=o("br",null,null,-1),ht=x(" Browser Info:"),mt=o("br",null,null,-1),vt=o("br",null,null,-1),pt=o("br",null,null,-1);function yt(n,t,s,a,e,i){return r(),c("div",De,[S(o("div",Pe,[Je,o("span",{class:"material-icons",style:{float:"right"},onClick:t[0]||(t[0]=l=>i.hide())},"clear"),Ve],512),[[N,!e.hidetip]]),o("div",{class:g({setting:!0,settingshow:e.show})},[o("span",{class:g({"material-icons":!0}),onClick:t[1]||(t[1]=l=>e.show=!e.show),id:"settingbutton"}," settings "),o("span",He,h(e.i18n.setting[e.lang]),1),o("div",{class:"clear",onClick:t[2]||(t[2]=l=>i.clearSetting())},[Ye,o("span",Qe,h(e.i18n.clear[e.lang]),1)]),Ge,S(o("div",We,[qe,S(o("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>e.targetLang=l)},[(r(!0),c(f,null,b(e.langList,l=>(r(),c("option",{key:l},h(l),1))),128))],512),[[H,e.targetLang]]),Ze,o("span",Xe,h(e.i18n.dr[e.lang])+": ",1),S(o("input",{class:"textbox","onUpdate:modelValue":t[4]||(t[4]=l=>e.doctor=l),style:{float:"left"}},null,512),[[$,e.doctor]]),et,o("span",tt,h(e.i18n.showDelay[e.lang])+": ",1),S(o("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>e.showDelay=l),"true-value":"y","false-value":"n",style:{float:"left"}},null,512),[[U,e.showDelay]]),nt,o("span",st,h(e.i18n.hideName[e.lang])+"(beta): ",1),S(o("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=l=>e.hideName=l),"true-value":"y","false-value":"n",style:{float:"left"}},null,512),[[U,e.hideName]]),ot,o("div",{class:"save",onClick:t[7]||(t[7]=l=>i.save())},[o("span",rt,h(e.i18n.save[e.lang]),1),it,lt]),at,o("div",ct,[ut,dt,x(" "+h(i.getJSONFile()),1),_t,ht,mt,x(" "+h(i.getUserAgent()),1),vt,x(" Browser width: "+h(i.getWidth()),1),pt])],512),[[N,e.show]])],2)])}var gt=p(Ue,[["render",yt]]);const ft={data(){return{line:this.inputline,hideName:!1}},mounted(){this.hideName=this.isHideName()},props:{inputline:Object,story:Object,lidx:Number},methods:{parseContent(n){return d.parseContent(n)},isHideName(){if(this.lidx=="0"||d.hideName=="n"||!this.line)return!1;var n=this.story[this.lidx-1];return!!(n.prop=="name"&&n.attributes&&this.line.attributes&&(console.log(n),n.attributes.name==this.line.attributes.name))}}},St={class:"textblock"},bt=["innerHTML"];function wt(n,t,s,a,e,i){return r(),c("div",St,[o("div",{class:g({nameblock:!0,hideName:e.hideName})},h(e.line.attributes.name),3),o("div",{class:"contentblock",innerHTML:i.parseContent(e.line.attributes.content)},null,8,bt)])}var kt=p(ft,[["render",wt]]);const xt={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(n){return d.parseContent(n)}}},Ct=["innerHTML"];function Nt(n,t,s,a,e,i){return r(),c("div",{class:g(e.line.prop),style:D({"text-align":e.line.attributes.alignment}),innerHTML:i.parseContent(e.line.attributes.text)},null,14,Ct)}var Lt=p(xt,[["render",Nt]]);const At={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(n){return d.parseContent(n)},jumpTo(n){var t=document.getElementById(n);t.scrollIntoView({behavior:"smooth",block:"center"})},addClass(n,t){var s=document.getElementById(n);s.classList.add(t)},removeClass(n,t){var s=document.getElementById(n);s.classList.remove(t)}}},Tt=["onClick","onMouseover","onMouseout","innerHTML"];function Et(n,t,s,a,e,i){return r(),c("div",{class:g(e.line.prop)},[(r(!0),c(f,null,b(e.line.attributes.values.split(";"),(l,u)=>(r(),c("div",{key:l,class:"option",onClick:_=>i.jumpTo(e.line.targetLine["option"+l]),onMouseover:_=>i.addClass(e.line.targetLine["option"+l],"PredicateFocused"),onMouseout:_=>i.removeClass(e.line.targetLine["option"+l],"PredicateFocused"),innerHTML:i.parseContent(e.line.attributes.options.split(";")[u])},null,40,Tt))),128))],2)}var zt=p(At,[["render",Et]]);const It={data(){return{line:this.inputline}},props:{inputline:Object}},Rt={key:0,class:"optText"};function Mt(n,t,s,a,e,i){return r(),c("div",{class:g(e.line.prop)},[e.line.endOfOpt?L("",!0):(r(),c("div",Rt,"Options: "+h(e.line.attributes.references.replaceAll(";"," ")),1))],2)}var Ot=p(It,[["render",Mt]]);const jt={data(){return{line:this.inputline}},props:{inputline:Object}};function Bt(n,t,s,a,e,i){return r(),c("div",{class:g(e.line.prop),style:D({height:e.line.attributes.time*30+"px"})},null,6)}var Kt=p(jt,[["render",Bt]]);const Ft={data(){return{line:this.inputline}},props:{inputline:Object}},$t=["src"];function Ut(n,t,s,a,e,i){return r(),c("img",{class:"Image",src:"https://aceship.github.io/AN-EN-Tags/img/avg/images/"+e.line.attributes.image+".png"},null,8,$t)}var Dt=p(Ft,[["render",Ut]]);const Pt={data(){return{data:d.storyData,path:d.storyFile,lang:d.l,server:d.server,doctor:d.doctor,i18n:I,showDelay:d.showDelay}},created(){this.path?E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/gamedata/story/"+this.path+".json").done(n=>this.data=n).fail(n=>{this.data={eventName:"Error on loading json file: "+this.path+"! If this is a new story, please contact the developer in github issue or discord to update the database."}}):this.data={eventName:"< - "+I.selectStory[this.lang]}},updated(){if(d.urlParams.get("warp")){var n=document.getElementById(d.urlParams.get("warp"));n&&(n.scrollIntoView({behavior:"smooth",block:"center"}),n.style.setProperty("background-color","#f4433633"))}d.focus()},methods:{jumpTo(n){var t=document.getElementById(n);t.scrollIntoView({behavior:"smooth",block:"center"})},changeColor(n,t){var s=document.getElementById(n);setInterval(s.style.setProperty("background-color",t),500)},getURL(n,t,s){return"?s="+n+"&f="+t+"&warp=line"+s},parseContent(n){return d.parseContent(n)}},components:{Nameline:kt,Subtitle:Lt,Decision:zt,Predicate:Ot,Delay:Kt,Showimg:Dt}},Jt={id:"content"},Vt={class:"storydata",id:"storydata"},Ht=["id"],Yt=["href"],Qt=o("div",{style:{clear:"both"}},null,-1);function Gt(n,t,s,a,e,i){const l=m("Nameline"),u=m("Subtitle"),_=m("Decision"),y=m("Predicate"),k=m("Delay"),C=m("Showimg");return r(),c("div",Jt,[o("div",Vt,h(e.data.eventName)+" "+h(e.data.storyCode)+" "+h(e.data.avgTag)+" "+h(e.data.storyName),1),(r(!0),c(f,null,b(e.data.storyList,(v,z)=>(r(),c("div",{key:v.id,class:"line",id:"line"+v.id},[o("a",{href:i.getURL(e.server,e.path,v.id),class:"linkButton material-icons"},"link",8,Yt),v.prop=="name"?(r(),w(l,{key:0,inputline:v,lidx:z,story:e.data.storyList},null,8,["inputline","lidx","story"])):L("",!0),v.prop=="Subtitle"?(r(),w(u,{key:1,inputline:v},null,8,["inputline"])):L("",!0),v.prop=="Decision"?(r(),w(_,{key:2,inputline:v},null,8,["inputline"])):L("",!0),v.prop=="Predicate"?(r(),w(y,{key:3,inputline:v},null,8,["inputline"])):L("",!0),v.prop=="Delay"&&e.showDelay=="y"?(r(),w(k,{key:4,inputline:v},null,8,["inputline"])):L("",!0),v.prop=="Image"&&v.attributes.image?(r(),w(C,{key:5,inputline:v},null,8,["inputline"])):L("",!0),Qt],8,Ht))),128))])}var Wt=p(Pt,[["render",Gt]]);const qt={methods:{scrollToTop(){document.getElementById("storydata").scrollIntoView({behavior:"smooth",block:"center"})}}};function Zt(n,t,s,a,e,i){return r(),c("span",{class:"material-icons topButton",onClick:t[0]||(t[0]=l=>i.scrollToTop())},"vertical_align_top")}var Xt=p(qt,[["render",Zt]]);const en={props:{item:Object,iidx:Number,focus:Boolean},emits:["focusme"]},tn={key:1,class:"material-icons itemicon"},nn={class:"itemname"};function sn(n,t,s,a,e,i){return r(),c("div",{class:g({navitem:!0,itemfocused:s.focus}),onClick:t[0]||(t[0]=l=>{n.$emit("focusme")})},[s.item.icon!="search"?(r(),c("div",{key:0,class:g([s.item.icon,"itemicon"])},null,2)):L("",!0),s.item.icon=="search"?(r(),c("span",tn,"search")):L("",!0),o("span",nn,h(s.item.title),1)],2)}var on=p(en,[["render",sn]]);const rn={data(){return{navi:{maintheme:{icon:"terminal-maintheme",title:"Maintheme"},intermezzi:{icon:"terminal-intermezzi",title:"Intermezzi"},sidestory:{icon:"terminal-sidestory",title:"Sidestory"},storyset:{icon:"terminal-storyset",title:"Storyset"},or:{icon:"terminal-record",title:"Records"},search:{icon:"search",title:"Search (Beta)"}}}},emits:["focuson"],props:{focus:Number},components:{Navitem:on}},ln={class:"navibar"};function an(n,t,s,a,e,i){const l=m("Navitem");return r(),c("div",ln,[(r(!0),c(f,null,b(e.navi,(u,_,y)=>(r(),w(l,{key:_,item:u,onFocusme:k=>{s.focus=y,n.$emit("focuson",y)},focus:s.focus==y},null,8,["item","onFocusme","focus"]))),128))])}var cn=p(rn,[["render",an]]);const un={data(){return{server:d.server}},emits:["focusme"],props:{eventData:Object,showStory:Boolean},methods:{getAvatar(){return"https://aceship.github.io/AN-EN-Tags/img/avatars/char_"+this.eventData.cid+"_"+this.eventData.cin+".png"},loadStory(n){var t="s="+this.server;t=t+"&f="+n,window.location.search=t}}},dn=["src"],_n={class:"operatorname"},hn={class:"setnumber"},mn={class:"orstories"},vn=["onClick"];function pn(n,t,s,a,e,i){return r(),c("div",{class:g({oritem:!0,orfocused:s.showStory})},[o("div",{class:"orcard",onClick:t[0]||(t[0]=l=>n.$emit("focusme"))},[o("img",{src:i.getAvatar()},null,8,dn),o("div",_n,h(s.eventData.name),1),o("div",hn,"#"+h(s.eventData.set),1)]),S(o("div",mn,[(r(!0),c(f,null,b(s.eventData.infoUnlockDatas,(l,u)=>(r(),c("div",{class:"orstory",key:u,onClick:_=>i.loadStory(l.storyTxt)},h(u)+". "+h(l.storyName),9,vn))),128))],512),[[N,s.showStory]])],2)}var yn=p(un,[["render",pn]]);const gn={data(){return{focus:-1}},props:{eventList:Array},components:{Oritem:yn},methods:{focuson(n){this.focus==n?this.focus=-1:this.focus=n}}},fn={class:"record"};function Sn(n,t,s,a,e,i){const l=m("Oritem");return r(),c("div",fn,[(r(!0),c(f,null,b(s.eventList,(u,_)=>(r(),w(l,{key:_,eventData:u,"show-story":e.focus==_,onFocusme:y=>i.focuson(_)},null,8,["eventData","show-story","onFocusme"]))),128))])}var bn=p(gn,[["render",Sn]]);const wn={props:["story"],emits:["hidemenu","focusstory","unfoldevent"],data(){return{focused:!1,lang:d.l,server:d.server}},mounted(){d.storyFile==this.story.storyTxt&&(this.focused=!0,this.$emit("unfoldevent"))},methods:{loadStory(n,t){var s="s="+this.server;s=s+"&f="+t,window.location.search=s}}},kn=["id"],xn={class:"storycode"},Cn={class:"storyname"};function Nn(n,t,s,a,e,i){return r(),c("div",{class:g({story:!0,storyFocused:e.focused}),id:s.story.storyId,onClick:t[0]||(t[0]=l=>i.loadStory(e.lang,s.story.storyTxt))},[o("div",xn,h(s.story.storyCode)+" "+h(s.story.avgTag),1),o("div",Cn,h(s.story.storyName),1)],10,kn)}var Ln=p(wn,[["render",Nn]]);const An={props:["event","eventid"],emits:["hidemenu","focusStory"],data(){return{collapsed:!0}},components:{Storymenu:Ln}},Tn={class:"event"},En={class:"stories"};function zn(n,t,s,a,e,i){const l=m("Storymenu");return r(),c("div",Tn,[o("div",{class:g({eventname:!0,eventnamehl:!e.collapsed}),onClick:t[0]||(t[0]=u=>e.collapsed=!e.collapsed)},h(s.event.name),3),S(o("div",En,[(r(!0),c(f,null,b(s.event.infoUnlockDatas,(u,_)=>(r(),w(l,{story:u,onUnfoldevent:t[1]||(t[1]=y=>{e.collapsed=!1,n.$emit("focusStory")}),key:_},null,8,["story"]))),128))],512),[[N,!e.collapsed]])])}var R=p(An,[["render",zn]]);const In={props:{eventList:Object},components:{Eventmenu:R}},Rn={class:"maintheme"};function Mn(n,t,s,a,e,i){const l=m("Eventmenu");return r(),c("div",Rn,[(r(!0),c(f,null,b(s.eventList,(u,_)=>(r(),w(l,{key:_,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var On=p(In,[["render",Mn]]);const jn={props:{eventList:Object},components:{Eventmenu:R}},Bn={class:"intermezzi"};function Kn(n,t,s,a,e,i){const l=m("Eventmenu");return r(),c("div",Bn,[(r(!0),c(f,null,b(s.eventList,(u,_)=>(r(),w(l,{key:_,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var Fn=p(jn,[["render",Kn]]);const $n={props:{eventList:Object},components:{Eventmenu:R}},Un={class:"sidestory"};function Dn(n,t,s,a,e,i){const l=m("Eventmenu");return r(),c("div",Un,[(r(!0),c(f,null,b(s.eventList,(u,_)=>(r(),w(l,{key:_,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var Pn=p($n,[["render",Dn]]);const Jn={props:{eventList:Object},components:{Eventmenu:R}},Vn={class:"storyset"};function Hn(n,t,s,a,e,i){const l=m("Eventmenu");return r(),c("div",Vn,[(r(!0),c(f,null,b(s.eventList,(u,_)=>(r(),w(l,{key:_,event:u,eventid:u.id},null,8,["event","eventid"]))),128))])}var Yn=p(Jn,[["render",Hn]]);const Qn={data(){return{searchvalue:"",result:{},server:d.server,resultNumber:0,isIncomplete:!1,isSearching:!1}},props:{eventList:Object},methods:{searchRequest(){this.isSearching=!0,this.result={},this.resultNumber="Searching";var n="https://api.github.com/search/code?q="+this.searchvalue+"+repo:050644zf/ArknightsStoryJson+path:"+this.server+"/gamedata";E.ajaxSetup({headers:{Accept:"application/vnd.github.v3.text-match+json"}}),E.getJSON(n).done(t=>{this.result={};const s=/.+\/gamedata\/story\/(.+)\./;this.resultNumber=t.total_count,this.isIncomplete=t.incomplete_results;var a=[],e=[],i;for(i in t.items)console.log(t.items[i].path.match(s)[1]),e.push(t.items[i].path.match(s)[1]),a.push(t.items[i].text_matches);console.log(a);var l,u,_;for(l in this.eventList){var y=this.eventList[l];for(u in y){var k=y[u],C=[];for(_ in k.infoUnlockDatas){var v=e.indexOf(k.infoUnlockDatas[_].storyTxt);v>-1&&(console.log(v),e.splice(v,1),C.push({storyCode:k.infoUnlockDatas[_].storyCode,avgTag:k.infoUnlockDatas[_].avgTag,storyName:k.infoUnlockDatas[_].storyName,storyPath:k.infoUnlockDatas[_].storyTxt,text_matches:a[v]}),a.splice(v,1))}C.length&&(this.result[k.name]=C)}}}),this.isSearching=!1},parseFrag(n,t){if(n){var s;for(s in t)n=n.replaceAll(t[s].text,'<span style="color:yellow">'+t[s].text+"</span>");n=n.replaceAll("\\n","<br/>")}return n},loadStory(n){var t="s="+this.server;t=t+"&f="+n,window.location.search=t}}},Gn={class:"search"},Wn=o("br",null,null,-1),qn={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Zn={class:"resulttitle"},Xn={style:{"font-size":"smaller"}},es=o("br",null,null,-1),ts=["onClick"],ns=["innerHTML"],ss=o("div",{style:{margin:"10%",color:"rgba(255,255,255,0.7)"}},[o("p",{style:{"text-align":"center"}},"The search feature is powered by Github API."),o("p",{style:{"font-weight":"bold"}},"Didn't find the expected result?"),o("p",null,[x("The Github code search only return the result that the target text is exactly surrounded by "),o("span",{style:{"font-weight":"bold"}},"spaces or punctuation"),x(". Try using plural noun or change its tense to get more results. ")])],-1);function os(n,t,s,a,e,i){return r(),c("div",Gn,[o("div",{class:g({searchbar:!0,searching:e.isSearching})},[S(o("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.searchvalue=l),onKeyup:t[1]||(t[1]=Y(l=>i.searchRequest(),["enter"]))},null,544),[[$,e.searchvalue]]),o("span",{class:"material-icons",onClick:t[2]||(t[2]=l=>i.searchRequest())},"search")],2),o("div",{class:g({searchresult:!0,searching:e.isSearching})},[x(h(e.resultNumber)+" results",1),Wn,(r(!0),c(f,null,b(e.result,(l,u,_)=>(r(),c("div",{key:_,style:{"font-weight":"bold",margin:"5px"}},[x(h(u)+" ",1),(r(!0),c(f,null,b(l,(y,k)=>(r(),c("div",{key:k,style:{"font-weight":"normal","margin-left":"20px"}},[o("div",qn,[o("div",Zn,[o("span",Xn,h(y.storyCode)+" "+h(y.avgTag),1),es,o("span",null,h(y.storyName),1)]),o("span",{class:"material-icons loadButton",onClick:C=>i.loadStory(y.storyPath)},"open_in_new",8,ts)]),(r(!0),c(f,null,b(y.text_matches,(C,v)=>(r(),c("div",{class:"textmatch",key:v,innerHTML:i.parseFrag(C.fragment,C.matches)},null,8,ns))),128))]))),128))]))),128))],2),ss])}var rs=p(Qn,[["render",os]]);const is={data(){return{focus:0,i18n:I,lang:d.l,server:d.server,chardict:{},intermezzi:d.intermezzi,eventList:{},data:{},showLangSelect:!1}},created(){E.getJSON("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").done(n=>{this.data=n,E.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").done(t=>{this.chardict=t,this.eventList=this.getEventList(this.data,this.chardict)})})},components:{Navibar:cn,Maintheme:On,Intermezzi:Fn,Sidestory:Pn,Storyset:Yn,Or:bn,Search:rs},methods:{serverSwitch(n){var t="s="+n;window.location.search=t},getEventList(n,t){var s={maintheme:[],intermezzi:[],sidestory:[],storyset:[],or:[]},a;for(a in n)if(n[a].entryType=="MAINLINE")s.maintheme.push(n[a]);else if(n[a].entryType=="ACTIVITY")this.intermezzi.indexOf(a)==-1?s.sidestory.push(n[a]):s.intermezzi.push(n[a]);else if(n[a].entryType=="MINI_ACTIVITY")s.storyset.push(n[a]);else if(n[a].entryType=="NONE"){var e=a.split("_")[1],i=a.split("_")[3];n[a].name=t[e].name,n[a].cid=t[e].id,n[a].cin=e,n[a].set=i,s.or.push(n[a])}return s.intermezzi.sort(function(l,u){return l.startTime-u.startTime}),s.sidestory.sort(function(l,u){return l.startTime-u.startTime}),s.storyset.sort(function(l,u){return l.startTime-u.startTime}),s}}},ls={class:"menupage"},as={id:"currentLang",class:"currentLang"},cs=o("span",{class:"material-icons",style:{"margin-right":"5px"}},"language",-1),us={id:"langSelect",class:"langSelect"},ds=["onClick"],_s=o("br",null,null,-1);function hs(n,t,s,a,e,i){const l=m("Navibar"),u=m("Maintheme"),_=m("Intermezzi"),y=m("Sidestory"),k=m("Storyset"),C=m("Or"),v=m("Search");return r(),c("div",ls,[o("div",as,[o("div",{style:{display:"flex","align-items":"center","justify-content":"center"},onClick:t[0]||(t[0]=z=>e.showLangSelect=!e.showLangSelect)},[cs,o("span",null,h(e.i18n.server[e.server]),1)]),S(o("div",us,[(r(!0),c(f,null,b(e.i18n.server,(z,J,V)=>(r(),c("div",{onClick:gs=>i.serverSwitch(J),key:V},h(z),9,ds))),128))],512),[[N,e.showLangSelect]])]),_s,A(l,{focus:e.focus,onFocuson:t[1]||(t[1]=z=>e.focus=z)},null,8,["focus"]),S(A(u,{eventList:e.eventList.maintheme},null,8,["eventList"]),[[N,e.focus==0]]),S(A(_,{eventList:e.eventList.intermezzi},null,8,["eventList"]),[[N,e.focus==1]]),S(A(y,{eventList:e.eventList.sidestory},null,8,["eventList"]),[[N,e.focus==2]]),S(A(k,{eventList:e.eventList.storyset},null,8,["eventList"]),[[N,e.focus==3]]),S(A(C,{eventList:e.eventList.or},null,8,["eventList"]),[[N,e.focus==4]]),S(A(v,{eventList:e.eventList},null,8,["eventList"]),[[N,e.focus==5]])])}var ms=p(is,[["render",hs]]);const vs={data(){return{storyData:{},storyFile:d.storyFile,lang:d.l,server:d.server}},components:{Header:se,Menu:$e,Content:Wt,Settings:gt,Topbtn:Xt,Menupage:ms},methods:{}};function ps(n,t,s,a,e,i){const l=m("Header"),u=m("Menu"),_=m("Settings"),y=m("Menupage"),k=m("Content"),C=m("Topbtn");return r(),c(f,null,[A(l),e.storyFile?(r(),w(u,{key:0})):L("",!0),A(_),e.storyFile?L("",!0):(r(),w(y,{key:1})),e.storyFile?(r(),w(k,{key:2})):L("",!0),A(C)],64)}var ys=p(vs,[["render",ps]]);Q(ys).mount("#ASTR");console.log(d.urlParams.get("f"));
