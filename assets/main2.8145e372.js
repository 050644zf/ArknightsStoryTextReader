import{_ as x}from"./plugin-vue_export-helper.ad25fb64.js";import{S as q,P as le,D as ce,V as _e,p as ue,q as de,r as s,o as l,c as f,l as t,s as n,a as I,t as m,h as _,F as $,b as j,d as h,L as pe,A as Y,G as me,u as he,y as ge,z as Z,B as X,C as Q,j as R,I as fe,E as ve,n as U,M as ee,w as ye,v as we,i as te,H as Se,J as be,m as xe,K as Ie}from"./vendor.96ab0222.js";const ke={zh_CN:"\u7B80\u4E2D\u670D(CN)",en_US:"Global Server(EN)",ja_JP:"\u65E5\u672C\u30B5\u30FC\u30D0\u30FC(JP)",ko_KR:"\uD55C\uAD6D \uC11C\uBC84(KR)",zh_TW:"\u7E41\u4E2D\u670D(TW)"},Te={zh_CN:"\u5F53\u524D\u8BED\u8A00",en_US:"Current Language",ja_JP:"\u73FE\u5728\u306E\u8A00\u8A9E",ko_KR:"\uD604\uC7AC \uC5B8\uC5B4",zh_TW:"\u7576\u524D\u8A9E\u8A00"},ze={zh_CN:"\u8BF7\u4ECE\u76EE\u5F55\u4E2D\u9009\u62E9\u6545\u4E8B\u67E5\u770B",en_US:"Select the story you wanna view from the menu",ja_JP:"Select the story you wanna view from the menu",ko_KR:"Select the story you wanna view from the menu",zh_TW:"\u8ACB\u5F9E\u76EE\u9304\u4E2D\u9078\u64C7\u6545\u4E8B\u67E5\u770B"},Ne={zh_CN:"\u9996\u9875",en_US:"Homepage",ja_JP:"\u30DB\u30FC\u30E0\u30DA\u30FC\u30B8",ko_KR:"\uD648\uD398\uC774\uC9C0",zh_TW:"\u9996\u9801"},Ce={zh_CN:"\u4E3B\u9898\u66F2",en_US:"Maintheme",ja_JP:"Maintheme",ko_KR:"Maintheme",zh_TW:"\u4E3B\u9898\u66F2"},Le={zh_CN:"\u63D2\u66F2",en_US:"Intermezzi",ja_JP:"Intermezzi",ko_KR:"Intermezzi",zh_TW:"\u63D2\u66F2"},$e={zh_CN:"\u522B\u4F20",en_US:"Sidestory",ja_JP:"Sidestory",ko_KR:"Sidestory",zh_TW:"\u522B\u4F20"},Oe={zh_CN:"\u6545\u4E8B\u96C6",en_US:"Storyset",ja_JP:"Storyset",ko_KR:"Storyset",zh_TW:"\u6545\u4E8B\u96C6"},De={zh_CN:"\u5E72\u5458\u5BC6\u5F55",en_US:"Operators' Records",ja_JP:"Operators' Records",ko_KR:"Operators' Records",zh_TW:"\u5E79\u54E1\u5BC6\u9304"},Re={zh_CN:"\u641C\u7D22",en_US:"Search",ja_JP:"\u691C\u7D22",ko_KR:"Search",zh_TW:"\u641C\u7D22"},je={zh_CN:"\u8BBE\u7F6E",en_US:"Settings",ja_JP:"Settings",ko_KR:"Settings",zh_TW:"\u8BBE\u7F6E"},Ae={zh_CN:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E",en_US:"Reset All Settings",ja_JP:"Reset All Settings",ko_KR:"Reset All Settings",zh_TW:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E"},Je={zh_CN:"\u535A\u58EB\u79F0\u547C",en_US:"Doctor's Name",ja_JP:"\u30C9\u30AF\u30BF\u30FC\u306E\u540D\u524D",ko_KR:"Doctor's Name",zh_TW:"\u535A\u58EB\u7A31\u547C"},Ue={zh_CN:"\u663E\u793A\u7A7A\u767D\u5206\u5272\u884C",en_US:"Show Blank Seperation Line",ja_JP:"Show Blank Seperation Line",ko_KR:"Show Blank Seperation Line",zh_TW:"\u986F\u793A\u7A7A\u767D\u5206\u5272\u884C"},Me={zh_CN:"\u9690\u85CF\u91CD\u590D\u4EBA\u540D",en_US:"Hide Duplicate Names",ja_JP:"Hide Duplicate Names",ko_KR:"Hide Duplicate Names",zh_TW:"\u96B1\u85CF\u91CD\u8907\u4EBA\u540D"},Pe={zh_CN:"\u5E94\u7528\u8BBE\u7F6E",en_US:"Apply Setting",ja_JP:"Apply Setting",ko_KR:"Apply Setting",zh_TW:"\u5E94\u7528\u8BBE\u7F6E"},Ee={zh_CN:"\u8FD4\u56DE\u76EE\u5F55",en_US:"Return to Menu",ja_JP:"Return to Menu",ko_KR:"Return to Menu",zh_TW:"\u8FD4\u56DE\u76EE\u9304"},Fe={zh_CN:"\u76EE\u5F55",en_US:"Menu",ja_JP:"Menu",ko_KR:"Menu",zh_TW:"\u76EE\u9304"},Ke={zh_CN:"\u5BFC\u51FAExcel",en_US:"Export to Excel",ja_JP:"Export to Excel",ko_KR:"Export to Excel",zh_TW:"\u5C0E\u51FAExcel"},We={zh_CN:"\u663E\u793A\u7B80\u4ECB",en_US:"Show Intro",ja_JP:"Show Intro",ko_KR:"Show Intro",zh_TW:"\u986F\u793A\u7C21\u4ECB"},He={zh_CN:"\u7531\u4E8E\u6280\u672F\u95EE\u9898\uFF0C\u9009\u9879\u8DDF\u8E2A\u5728\u8BE5\u6545\u4E8B\u5DF2\u88AB\u7981\u7528",en_US:"Option Tracing Feature is disabled in this story due to technical issues.",ja_JP:"Option Tracing Feature is disabled in this story due to technical issues.",ko_KR:"Option Tracing Feature is disabled in this story due to technical issues.",zh_TW:"\u7531\u65BC\u6280\u8853\u554F\u984C\uFF0C\u9078\u9805\u8DDF\u8E2A\u5728\u8A72\u6545\u4E8B\u5DF2\u88AB\u7981\u7528"};var J={server:ke,currentLang:Te,selectStory:ze,homepage:Ne,main:Ce,intermezzi:Le,ss:$e,mini:Oe,or:De,search:Re,setting:je,clear:Ae,dr:Je,showDelay:Ue,hideName:Me,save:Pe,home:Ee,menu:Fe,export2excel:Ke,showIntro:We,optionTraceDisabled:He};const ne=["zh_CN","en_US","ko_KR","ja_JP","zh_TW"];var E=new URLSearchParams(window.location.search),F=E.get("s"),O=window.localStorage.getItem("lang"),K=window.localStorage.getItem("doctor"),W=window.localStorage.getItem("hidetip"),H=window.localStorage.getItem("showDelay"),B=window.localStorage.getItem("hideName"),P=window.localStorage.getItem("wversion"),Be=E.get("f"),Ve={eventName:"Loading..."},oe=!1;const se=13;F||(F="zh_CN");(!O||O=="none"||O=="Default")&&(O=navigator.language.replace("-","_"));O=="ja"&&(O="ja_JP");ne.indexOf(O)==-1&&(O="en_US");console.log("Current Language: "+O);K||(K="{@nickname}");W||(W=!1);H||(H="y");B||(B="n");(!P||P<se)&&(P=se,window.localStorage.setItem("wversion",P),oe=!0);var z={urlParams:E,l:O,langList:ne,server:F,doctor:K,hidetip:W,showDelay:H,hideName:B,storyFile:Be,storyData:Ve,intermezzi:["act9d0","act18d0","act18d3"],wversion:P,isOldversion:oe,parseContent(e){if(e){const r=/<color=([\w#]+)>(.+?)<\/color>/gm,a='<span style="color:$1">$2</span>';e=e.replaceAll("{@nickname}",this.doctor),e=e.replaceAll("\\n","<br/>"),e=e.replace(r,a)}return e},focus(){var e=document.getElementsByClassName("storyFocused")[0];e&&e.scrollIntoView({behavior:"smooth",block:"center"}),console.log("focused!")}};const Ge={data(){return{i18n:J,currentLang:z.l,langOpts:z.langList,doctor:z.doctor,showDelay:z.showDelay,hideName:z.hideName}},props:{showsettings:{type:Boolean,default:!1}},components:{SettingsIcon:q,LangIcon:le,DrNameIcon:ce,BlankIcon:_e,SaveIcon:ue,ResetIcon:de},methods:{save(){window.localStorage.setItem("doctor",this.doctor),window.localStorage.setItem("showDelay",this.showDelay),window.localStorage.setItem("hideName",this.hideName),window.localStorage.setItem("lang",this.currentLang),window.location.reload(!0)},clearSetting(){window.localStorage.clear(),window.location.reload(!0)}}},qe=_(" Dr. ");function Ye(e,r,a,i,o,c){const d=s("SettingsIcon"),u=s("n-icon"),p=s("n-button"),g=s("n-space"),y=s("LangIcon"),w=s("n-radio-button"),k=s("n-radio-group"),S=s("DrNameIcon"),v=s("n-input"),N=s("BlankIcon"),L=s("n-switch"),D=s("ResetIcon"),A=s("SaveIcon"),M=s("n-drawer-content"),C=s("n-drawer");return l(),f($,null,[t(p,{text:"",class:"SettingsBtn",onClick:r[0]||(r[0]=b=>a.showsettings=!0)},{default:n(()=>[t(u,null,{default:n(()=>[t(d)]),_:1})]),_:1}),t(C,{show:a.showsettings,"onUpdate:show":r[6]||(r[6]=b=>a.showsettings=b),placement:"top"},{default:n(()=>[t(M,{closable:""},{header:n(()=>[t(g,{"item-style":"display:flex;",align:"center"},{default:n(()=>[t(u,null,{default:n(()=>[t(d)]),_:1}),I("span",null,m(o.i18n.setting[o.currentLang]),1)]),_:1})]),footer:n(()=>[t(g,{"item-style":"display:flex;",align:"center",justify:"end"},{default:n(()=>[t(p,{strong:"",secondary:"",type:"error",onClick:r[4]||(r[4]=b=>c.clearSetting())},{default:n(()=>[t(u,null,{default:n(()=>[t(D)]),_:1}),_(" \xA0"+m(o.i18n.clear[o.currentLang]),1)]),_:1}),t(p,{strong:"",type:"primary",onClick:r[5]||(r[5]=b=>c.save())},{default:n(()=>[t(u,null,{default:n(()=>[t(A)]),_:1}),_(" \xA0"+m(o.i18n.save[o.currentLang]),1)]),_:1})]),_:1})]),default:n(()=>[t(g,{"item-style":"display:flex;",align:"center"},{default:n(()=>[t(u,null,{default:n(()=>[t(y)]),_:1}),_(" "+m(o.i18n.currentLang[o.currentLang])+": ",1),t(k,{value:o.currentLang,"onUpdate:value":r[1]||(r[1]=b=>o.currentLang=b)},{default:n(()=>[(l(!0),f($,null,j(o.langOpts,b=>(l(),h(w,{key:b,value:b},{default:n(()=>[_(m(b),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),t(g,{"item-style":"display:flex;",align:"center"},{default:n(()=>[t(u,null,{default:n(()=>[t(S)]),_:1}),_(" "+m(o.i18n.dr[o.currentLang])+": ",1),t(g,{"item-style":"display:flex;",align:"center",justify:"end"},{default:n(()=>[qe,t(v,{value:o.doctor,"onUpdate:value":r[2]||(r[2]=b=>o.doctor=b),type:"text",placeholder:"{@nickname}"},null,8,["value"])]),_:1})]),_:1}),t(g,{"item-style":"display:flex;",align:"center"},{default:n(()=>[t(u,null,{default:n(()=>[t(N)]),_:1}),_(" "+m(o.i18n.showDelay[o.currentLang])+": ",1),t(L,{value:o.showDelay,"onUpdate:value":r[3]||(r[3]=b=>o.showDelay=b),"checked-value":"y","unchecked-value":"n"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])],64)}var Ze=x(Ge,[["render",Ye]]);const Xe={data(){return{serverOpts:this.getServerOpts(),i18n:J,showsettings:!1,server:this.$route.params.server}},created(){this.$watch(()=>this.$route.params,(e,r)=>{r.server!=e.server&&(this.serverOpts=this.getServerOpts())})},components:{LangIcon:pe,ArrowDropDown:Y,SettingsIcon:q,Settings:Ze},emits:["pushServer"],methods:{getServerOpts(){var e=[];for(var r in J.server)e.push({label:J.server[r],key:r,disabled:r==this.$route.params.server});return console.log(this.$route),e},async pushServer(e){this.$emit("pushServer",{server:e})}}},Qe=_(" Arknights Story Text Reader ");function et(e,r,a,i,o,c){const d=s("n-image"),u=s("n-h2"),p=s("n-space"),g=s("LangIcon"),y=s("n-icon"),w=s("ArrowDropDown"),k=s("n-button"),S=s("n-dropdown"),v=s("Settings"),N=s("n-layout-header");return l(),h(N,null,{default:n(()=>[t(p,{"item-style":"display: flex;",justify:"space-between",align:"center",class:"header"},{default:n(()=>[t(p,{"item-style":"display: flex;",align:"center"},{default:n(()=>[t(d,{src:"/ArknightsStoryTextReader/src/assets/favicon.png",width:"40"}),t(u,{style:{margin:"0px",padding:"5px"},strong:""},{default:n(()=>[Qe]),_:1})]),_:1}),t(p,{justify:"space-around","item-style":"display: flex;",align:"center"},{default:n(()=>[t(S,{options:o.serverOpts,onSelect:c.pushServer,class:"serverSelect"},{default:n(()=>[t(k,{text:""},{default:n(()=>[t(y,null,{default:n(()=>[t(g)]),_:1}),_(" "+m(o.i18n.server[e.$route.params.server])+" ",1),t(y,null,{default:n(()=>[t(w)]),_:1})]),_:1})]),_:1},8,["options","onSelect"]),t(v)]),_:1})]),_:1})]),_:1})}var re=x(Xe,[["render",et]]);const tt={data(){return{latestUpdate:0}},components:{Github:me,Discord:he},created(){fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/log.json").then(e=>e.json()).then(e=>{this.latestUpdate=e.latestCommitTime})},methods:{dateFormatter(e){var r=new Date(e*1e3),a="";return a=r.getUTCFullYear()+"-"+(r.getUTCMonth()+1)+"-"+r.getUTCDate()+" "+r.getUTCHours()+":"+r.getUTCMinutes()+":"+r.getUTCSeconds(),a},load(e){window.location=e}}},nt=I("br",null,null,-1),ot=_(" \u5F53\u524D\u72B6\u6001 / Current Status: "),st=I("br",null,null,-1),rt=I("img",{src:"https://app.travis-ci.com/050644zf/ArknightsStoryTextReader.svg?branch=master"},null,-1),it=_("\xA0 "),at=I("img",{src:"https://github.com/050644zf/ArknightsStoryTextReader/actions/workflows/ASTRAutoUpdater.yml/badge.svg"},null,-1);function lt(e,r,a,i,o,c){const d=s("Github"),u=s("n-icon"),p=s("n-button"),g=s("Discord"),y=s("n-space"),w=s("n-text"),k=s("n-layout-footer");return l(),h(k,null,{default:n(()=>[t(y,{justify:"space-around",class:"footer"},{default:n(()=>[t(y,{justify:"space-around"},{default:n(()=>[t(p,{text:"",onClick:r[0]||(r[0]=S=>c.load("https://github.com/050644zf/ArknightsStoryTextReader"))},{default:n(()=>[t(u,{size:"32"},{default:n(()=>[t(d)]),_:1})]),_:1}),t(p,{text:"",onClick:r[1]||(r[1]=S=>c.load("https://discord.gg/rihq"))},{default:n(()=>[t(u,{size:"32"},{default:n(()=>[t(g)]),_:1})]),_:1})]),_:1}),t(w,null,{default:n(()=>[_(" \u6700\u540E\u66F4\u65B0 / Last Update (UTC) : "+m(c.dateFormatter(o.latestUpdate)),1),nt,ot,st,rt,it,at]),_:1})]),_:1})]),_:1})}var ct=x(tt,[["render",lt]]);const _t={data(){return{darkTheme:ge}},components:{Header:re,Footer:ct}};function ut(e,r,a,i,o,c){const d=s("router-view"),u=s("n-dialog-provider"),p=s("n-loading-bar-provider"),g=s("Footer"),y=s("n-config-provider"),w=s("n-layout");return l(),h(w,null,{default:n(()=>[t(y,{theme:o.darkTheme},{default:n(()=>[t(p,null,{default:n(()=>[t(u,null,{default:n(()=>[t(d)]),_:1})]),_:1}),t(g)]),_:1},8,["theme"])]),_:1})}var dt=x(_t,[["render",ut]]);const pt={data(){return{server:this.$route.params.server,intermezzi:z.intermezzi,loadingbar:Z(),dialog:X()}},created(){this.initServerData(),this.$watch(()=>this.$route.params,(e,r)=>{r.server!=e.server&&window.location.reload()})},components:{Header:re},methods:{async pushServer({server:e}){const r=this.server;this.server=e,await this.initServerData(),window.location.href=window.location.href.replace(r,e)},async initServerData(){this.loadingbar.start();try{let e=await fetch("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").then(c=>c.json()),r=await fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").then(c=>c.json()),a=await fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/storyinfo.json").then(c=>c.json()),i=await fetch("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/chapter_table.json").then(c=>c.json()),o=await this.getEventList(e,r);i=await this.getMainthemeData(i,o),window.sessionStorage.setItem("server",this.server),window.sessionStorage.setItem("menudata",JSON.stringify(e)),window.sessionStorage.setItem("chardict",JSON.stringify(r)),window.sessionStorage.setItem("infodata",JSON.stringify(a)),window.sessionStorage.setItem("eventList",JSON.stringify(o)),window.sessionStorage.setItem("chapterdata",JSON.stringify(i)),this.loadingbar.finish()}catch(e){this.loadingbar.error(),console.log(e),this.dialog.error({title:"Fail to Load Event Data",content:"This maybe because of the server is not supported or the data is not available.If you are sure the server is supported, please summit a issue."})}},async getEventList(e,r){var a={maintheme:[],intermezzi:[],sidestory:[],storyset:[],or:[]},i;for(i in e)if(e[i].entryType=="MAINLINE")a.maintheme.push(e[i]);else if(e[i].entryType=="ACTIVITY")this.intermezzi.indexOf(i)==-1?a.sidestory.push(e[i]):a.intermezzi.push(e[i]);else if(e[i].entryType=="MINI_ACTIVITY")a.storyset.push(e[i]);else if(e[i].entryType=="NONE"){var o=i.split("_")[1],c=i.split("_")[3];e[i].name=r[o].name,e[i].cid=r[o].id,e[i].cin=o,e[i].set=c,a.or.push(e[i])}return a.intermezzi.sort(function(d,u){return d.startTime-u.startTime}),a.sidestory.sort(function(d,u){return d.startTime-u.startTime}),a.storyset.sort(function(d,u){return d.startTime-u.startTime}),a},async getMainthemeData(e,r){for(var a in e){var i=[],o=!1;for(var c of r.maintheme)c.id==e[a].startZoneId&&(o=!0),o&&i.push(c.id),c.id==e[a].endZoneId&&(o=!1);e[a].events=i}return e}}};function mt(e,r,a,i,o,c){const d=s("Header"),u=s("router-view");return l(),f($,null,[t(d,{onPushServer:c.pushServer},null,8,["onPushServer"]),t(u)],64)}var ht=x(pt,[["render",mt]]);const gt={data(){return{cdata:window.sessionStorage.getItem("chapterdata")?JSON.parse(window.sessionStorage.getItem("chapterdata")):[],mdata:window.sessionStorage.getItem("menudata")?JSON.parse(window.sessionStorage.getItem("menudata")):{}}}},ft=["src"];function vt(e,r,a,i,o,c){const d=s("n-h3"),u=s("n-text"),p=s("n-space"),g=s("n-card"),y=s("n-step"),w=s("n-steps");return l(),h(w,{vertical:""},{"finish-icon":n(()=>[]),default:n(()=>[(l(!0),f($,null,j(o.cdata,(k,S)=>(l(),h(y,{key:S},{title:n(()=>[t(p,null,{default:n(()=>[t(d,{strong:"",style:{margin:"0px"}},{default:n(()=>[_(m(k.chapterName),1)]),_:2},1024),t(u,{depth:"3"},{default:n(()=>[_(m(k.chapterName2),1)]),_:2},1024)]),_:2},1024)]),default:n(()=>[t(p,{vertical:""},{default:n(()=>[t(p,{"item-style":"display: flex;",align:"center"},{default:n(()=>[(l(!0),f($,null,j(k.events,(v,N)=>(l(),h(g,{"content-style":"padding: 0px;",key:N,size:"large",class:"episode",onClick:L=>e.$router.push("/"+e.$route.params.server+"/event/"+v)},{cover:n(()=>[I("img",{src:"https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/img/icons/"+v+".png",class:"mainicon",style:{height:"100px",width:"100px",margin:"auto"}},null,8,ft)]),default:n(()=>[t(u,{strong:""},{default:n(()=>[_(m(o.mdata[v].name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}var yt=x(gt,[["render",vt]]);const wt={props:["eventype"],data(){return{mdata:window.sessionStorage.getItem("menudata")?JSON.parse(window.sessionStorage.getItem("menudata")):{},eventList:window.sessionStorage.getItem("eventList")?JSON.parse(window.sessionStorage.getItem("eventList")):[]}},components:{ForwardIcon:Q}},St=["src"],bt=["src"];function xt(e,r,a,i,o,c){const d=s("n-h2"),u=s("n-text"),p=s("n-space"),g=s("ForwardIcon"),y=s("n-icon"),w=s("n-button"),k=s("n-list-item"),S=s("n-list");return l(),h(p,{class:"events","item-style":"display:flex;"},{default:n(()=>[t(S,{class:"list"},{default:n(()=>[(l(!0),f($,null,j(o.eventList[a.eventype],(v,N)=>(l(),h(k,{key:N},{suffix:n(()=>[t(w,{text:"",onClick:L=>e.$router.push("/"+e.$route.params.server+"/event/"+v.id)},{default:n(()=>[t(y,{size:"32"},{default:n(()=>[t(g)]),_:1})]),_:2},1032,["onClick"])]),default:n(()=>[t(p,{"item-style":"display:flex;",align:"center"},{default:n(()=>[a.eventype!="or"?(l(),f("img",{key:0,src:"https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/img/banners/"+v.id+".png"},null,8,St)):(l(),f("img",{key:1,src:"https://aceship.github.io/AN-EN-Tags/img/avatars/char_"+v.cid+"_"+v.cin+".png",style:{height:"64px"}},null,8,bt)),t(p,{"item-style":"display:flex;",align:"baseline"},{default:n(()=>[t(d,{style:{padding:"0px"}},{default:n(()=>[_(m(v.name),1)]),_:2},1024),a.eventype=="or"?(l(),h(u,{key:0,depth:"3"},{default:n(()=>[_("#"+m(v.set),1)]),_:2},1024)):R("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}var It=x(wt,[["render",xt]]);const kt={},Tt=_(" \u6B22\u8FCE\u8BBF\u95EE\u660E\u65E5\u65B9\u821F\u5267\u60C5\u6587\u672C\u9605\u8BFB\u5668\uFF01"),zt=I("br",null,null,-1),Nt=_(" Welcome to Arknights Story Text Reader! "),Ct=_(" \u8FD9\u662F\u65B0\u7248ASTR\u7684beta\u6D4B\u8BD5\uFF0C\u5C1A\u672A\u8FD8\u539F\u65E7\u7248ASTR\u7684\u6240\u6709\u529F\u80FD\uFF0C\u4E14\u6682\u672A\u4F18\u5316\u79FB\u52A8\u7AEF\u7F51\u9875\u3002"),Lt=I("br",null,null,-1),$t=_(" This is the beta version of ASTR, and it is not yet fully supporting the features in the old version of ASTR, and it is not optimized for mobile."),Ot=I("br",null,null,-1),Dt=I("br",null,null,-1),Rt=_(" \u4F60\u53EF\u4EE5"),jt=I("a",{href:"https://050644zf.github.io/ArknightsStoryTextReader/?s=zh_CN"},"\u5355\u51FB\u6B64\u5904",-1),At=_("\u8BBF\u95EE\u65E7\u7248ASTR\u3002"),Jt=I("br",null,null,-1),Ut=_(" You can "),Mt=I("a",{href:"https://050644zf.github.io/ArknightsStoryTextReader/?s=zh_CN"},"click here",-1),Pt=_(" to visit the old version of ASTR. "),Et=_(" Todo List: "),Ft=_("Implement the export, search feature."),Kt=_("Optimize the UI in events menu & Operators' Records menu "),Wt=_("Optimize the warpping logic in menu page"),Ht=_("Improve the content page");function Bt(e,r){const a=s("n-h1"),i=s("n-text"),o=s("n-hr"),c=s("n-h3"),d=s("n-li"),u=s("n-ol"),p=s("n-space");return l(),h(p,{vertical:"",class:"homepage"},{default:n(()=>[t(a,{prefix:"bar"},{default:n(()=>[Tt,zt,Nt]),_:1}),t(i,null,{default:n(()=>[Ct,Lt,$t,Ot,Dt,Rt,jt,At,Jt,Ut,Mt,Pt]),_:1}),t(o),t(c,{prefix:"bar"},{default:n(()=>[Et]),_:1}),t(u,null,{default:n(()=>[t(d,null,{default:n(()=>[Ft]),_:1}),t(d,null,{default:n(()=>[Kt]),_:1}),t(d,null,{default:n(()=>[Wt]),_:1}),t(d,null,{default:n(()=>[Ht]),_:1})]),_:1})]),_:1})}var Vt=x(kt,[["render",Bt]]);const Gt={data(){return{navi:{maintheme:{icon:"terminal-maintheme",title:"main"},intermezzi:{icon:"terminal-intermezzi",title:"intermezzi"},sidestory:{icon:"terminal-sidestory",title:"ss"},storyset:{icon:"terminal-storyset",title:"mini"},or:{icon:"terminal-record",title:"or"}},i18n:J,currentLang:z.l}},components:{InfoIcon:fe,SearchIcon:ve,Maintheme:yt,Events:It,Homepage:Vt}},qt={class:"menucontent"},Yt=_(" To Be Done ");function Zt(e,r,a,i,o,c){const d=s("InfoIcon"),u=s("n-icon"),p=s("Homepage"),g=s("n-tab-pane"),y=s("Maintheme"),w=s("Events"),k=s("SearchIcon"),S=s("n-tabs"),v=s("router-view"),N=s("n-layout-content");return l(),h(N,{class:"menupage"},{default:n(()=>[t(S,{type:"line","justify-content":"space-evenly"},{default:n(()=>[t(g,{name:"home"},{tab:n(()=>[t(u,null,{default:n(()=>[t(d)]),_:1}),_("\xA0"+m(o.i18n.homepage[o.currentLang]),1)]),default:n(()=>[t(p)]),_:1}),(l(!0),f($,null,j(o.navi,(L,D,A)=>(l(),h(g,{name:D,key:A},{tab:n(()=>[t(u,null,{default:n(()=>[I("div",{class:U(L.icon)},null,2)]),_:2},1024),_("\xA0"+m(o.i18n[L.title][o.currentLang]),1)]),default:n(()=>[I("div",qt,[D=="maintheme"?(l(),h(y,{key:0})):(l(),h(w,{key:1,eventype:D},null,8,["eventype"]))])]),_:2},1032,["name"]))),128)),t(g,{name:"search"},{tab:n(()=>[t(u,null,{default:n(()=>[t(k)]),_:1}),_("\xA0"+m(o.i18n.search[o.currentLang]),1)]),default:n(()=>[Yt]),_:1})]),_:1}),t(v)]),_:1})}var Xt=x(Gt,[["render",Zt]]);const Qt={data(){return{eventid:this.$route.params.event,data:window.sessionStorage.getItem("menudata")?JSON.parse(window.sessionStorage.getItem("menudata")):{},infodata:window.sessionStorage.getItem("infodata")?JSON.parse(window.sessionStorage.getItem("infodata")):{},i18n:J,currentLang:z.l,showIntro:!1}},components:{MenuIcon:ee,ForwardIcon:Q}};function en(e,r,a,i,o,c){const d=s("MenuIcon"),u=s("n-icon"),p=s("n-breadcrumb-item"),g=s("n-breadcrumb"),y=s("n-affix"),w=s("n-text"),k=s("n-switch"),S=s("n-space"),v=s("n-h3"),N=s("ForwardIcon"),L=s("n-button"),D=s("n-list-item"),A=s("n-list"),M=s("n-layout-content");return l(),h(M,null,{default:n(()=>[t(S,{vertical:"",class:"eventpage"},{default:n(()=>[t(y,{top:40,"trigger-top":20,position:"fixed"},{default:n(()=>[t(g,{class:"breadcrumb"},{default:n(()=>[t(p,{onClick:r[0]||(r[0]=C=>e.$router.push("/"+e.$route.params.server+"/menu"))},{default:n(()=>[t(u,null,{default:n(()=>[t(d)]),_:1}),_(" "+m(o.i18n.menu[o.currentLang]),1)]),_:1}),t(p,null,{default:n(()=>[_(m(o.data[o.eventid].name),1)]),_:1})]),_:1})]),_:1}),t(S,null,{default:n(()=>[t(w,null,{default:n(()=>[_(m(o.i18n.showIntro[o.currentLang]),1)]),_:1}),t(k,{value:o.showIntro,"onUpdate:value":r[1]||(r[1]=C=>o.showIntro=C)},null,8,["value"])]),_:1}),t(A,null,{default:n(()=>[(l(!0),f($,null,j(o.data[o.eventid].infoUnlockDatas,(C,b)=>(l(),h(D,{key:b},{suffix:n(()=>[t(L,{text:"",onClick:G=>e.$router.push({path:"/"+e.$route.params.server+"/content",query:{f:C.storyTxt}})},{default:n(()=>[t(u,{size:"32"},{default:n(()=>[t(N)]),_:1})]),_:2},1032,["onClick"])]),default:n(()=>[t(S,{vertical:""},{default:n(()=>[t(S,{"item-style":"display:flex;",align:"end"},{default:n(()=>[t(v,{style:{margin:"0px"},prefix:"bar"},{default:n(()=>[_(m(C.storyName),1)]),_:2},1024),t(w,{depth:"3"},{default:n(()=>[_(m(C.storyCode)+" "+m(C.avgTag),1)]),_:2},1024)]),_:2},1024),ye(t(w,{depth:"2"},{default:n(()=>[_(m(o.infodata[C.storyTxt]),1)]),_:2},1536),[[we,o.showIntro]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}var tn=x(Qt,[["render",en]]);const nn={data(){return{data:{},chardict:{},eventList:{},lang:"zh_CN",server:"zh_CN",i18n:{},showMenu:!0,showLangSelect:!1}},created(){this.loadData()},methods:{async loadData(){this.data=await fetch("https://raw.githubusercontent.com/Kengxxiao/ArknightsGameData/master/"+this.server+"/gamedata/excel/story_review_table.json").then(e=>e.json()),this.chardict=await fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/chardict.json").then(e=>e.json()),this.eventList=await this.getEventList(this.data,this.chardict)},async getEventList(e,r){var a=[],i;for(i in e)if(e[i].entryType=="MAINLINE")a.push(e[i]);else if(e[i].entryType=="ACTIVITY")a.push(e[i]);else if(e[i].entryType=="MINI_ACTIVITY")a.push(e[i]);else if(e[i].entryType=="NONE"){var o=i.split("_")[1],c=i.split("_")[3];e[i].name=r[o].name+" - "+c,a.push(e[i])}return a}}};function on(e,r,a,i,o,c){const d=s("n-layout-sider");return l(),h(d,null,{default:n(()=>[_(m(o.eventList),1)]),_:1})}var sn=x(nn,[["render",on]]);const rn={data(){return{line:this.inputline,hideName:z.hideName}},props:{inputline:Object,story:Object,lidx:Number},methods:{parseContent(e){return z.parseContent(e)},isHideName(){if(console.log([this.lidx,this.hideName,this.line]),this.lidx=="0"||this.hideName=="n"||!this.line)return!1;var e=this.story[this.lidx-1];return!!(e.prop=="name"&&e.attributes&&this.line.attributes&&e.attributes.name==this.line.attributes.name)}}},an={class:"textblock"},ln={class:U({nameblock:!0})},cn=["innerHTML"];function _n(e,r,a,i,o,c){return l(),f("div",an,[I("div",ln,m(o.line.attributes.name),1),I("div",{class:"contentblock",innerHTML:c.parseContent(o.line.attributes.content)},null,8,cn)])}var un=x(rn,[["render",_n]]);const dn={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(e){return z.parseContent(e)}}},pn=["innerHTML"];function mn(e,r,a,i,o,c){return l(),f("div",{class:U(o.line.prop),style:te({"text-align":o.line.attributes.alignment}),innerHTML:c.parseContent(o.line.attributes.text)},null,14,pn)}var hn=x(dn,[["render",mn]]);const gn={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(e){return z.parseContent(e)},jumpTo(e){var r=document.getElementById(e);r.scrollIntoView({behavior:"smooth",block:"center"})},addClass(e,r){var a=document.getElementById(e);a.classList.add(r)},removeClass(e,r){var a=document.getElementById(e);a.classList.remove(r)}}},fn=["onClick","onMouseover","onMouseout","innerHTML"];function vn(e,r,a,i,o,c){return l(),f("div",{class:U(o.line.prop)},[(l(!0),f($,null,j(o.line.attributes.values.split(";"),(d,u)=>(l(),f("div",{key:d,class:"option",onClick:p=>c.jumpTo(o.line.targetLine["option"+d]),onMouseover:p=>c.addClass(o.line.targetLine["option"+d],"PredicateFocused"),onMouseout:p=>c.removeClass(o.line.targetLine["option"+d],"PredicateFocused"),innerHTML:c.parseContent(o.line.attributes.options.split(";")[u])},null,40,fn))),128))],2)}var yn=x(gn,[["render",vn]]);const wn={data(){return{line:this.inputline}},props:{inputline:Object}},Sn={key:0,class:"optText"};function bn(e,r,a,i,o,c){return l(),f("div",{class:U(o.line.prop)},[o.line.endOfOpt?R("",!0):(l(),f("div",Sn,"Options: "+m(o.line.attributes.references.replaceAll(";"," ")),1))],2)}var xn=x(wn,[["render",bn]]);const In={data(){return{line:this.inputline}},props:{inputline:Object}};function kn(e,r,a,i,o,c){return l(),f("div",{class:U(o.line.prop),style:te({height:o.line.attributes.time*30+"px"})},null,6)}var Tn=x(In,[["render",kn]]);const zn={data(){return{line:this.inputline}},props:{inputline:Object}},Nn=["src"];function Cn(e,r,a,i,o,c){return l(),f("img",{class:"Image",src:"https://aceship.github.io/AN-EN-Tags/img/avg/images/"+o.line.attributes.image+".png"},null,8,Nn)}var Ln=x(zn,[["render",Cn]]);const $n={data(){return{path:this.$route.query.f,data:{},eventid:"",server:this.$route.params.server,i18n:J,currentLang:z.l,showDelay:z.showDelay,loading:!0,loadingbar:Z(),dialog:X(),mdata:window.sessionStorage.getItem("menudata")?JSON.parse(window.sessionStorage.getItem("menudata")):{},storyOpts:[]}},created(){this.loadingbar.start(),this.getStoryData(),this.$watch(()=>this.$route.query,(e,r)=>{r.f!=e.f&&e.f&&(this.loadingbar.start(),this.path=e.f,this.getStoryData())})},components:{Menu:sn,Nameline:un,Subtitle:hn,Decision:yn,Predicate:xn,Delay:Tn,Showimg:Ln,MenuIcon:ee,ArrowDropDown:Y},methods:{async getStoryData(){this.loading=!0,fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.server+"/gamedata/story/"+this.path+".json").then(e=>e.json()).then(e=>{this.data=e,this.eventid=e.eventid}).then(()=>{this.storyOpts=this.getStoryOpts(),this.loading=!1,this.loadingbar.finish()}).catch(e=>{this.loadingbar.error(),console.log(e),this.dialog.error({title:"Fail to Load Story Data",content:"This maybe because the story is not availble in this server or the story is not exist. If you sure the story is exist in this server, please summit a issue. "})})},getStoryOpts(){var e=[];for(var r of this.mdata[this.eventid].infoUnlockDatas)e.push({key:r.storyTxt,label:r.storyCode+" "+r.storyName+" - "+r.avgTag,disabled:r.storyTxt==this.path});return e},pushStory(e){this.$router.push({path:"/"+this.server+"/content",query:{f:e}})}}},On=["id"],Dn=I("div",{style:{clear:"both"}},null,-1);function Rn(e,r,a,i,o,c){const d=s("n-skeleton"),u=s("MenuIcon"),p=s("n-icon"),g=s("n-breadcrumb-item"),y=s("ArrowDropDown"),w=s("n-text"),k=s("n-dropdown"),S=s("n-breadcrumb"),v=s("n-affix"),N=s("n-h4"),L=s("Nameline"),D=s("Subtitle"),A=s("Decision"),M=s("Predicate"),C=s("Delay"),b=s("Showimg"),G=s("n-layout-content"),ie=s("n-layout");return l(),h(ie,null,{default:n(()=>[t(G,{class:"content",ref:"content"},{default:n(()=>[t(v,{top:20,"trigger-top":20,position:"fixed"},{default:n(()=>[o.loading?(l(),h(d,{key:0,class:"breadcrumb"})):(l(),h(S,{key:1,class:"breadcrumb"},{default:n(()=>[t(g,{onClick:r[0]||(r[0]=T=>e.$router.push("/"+e.$route.params.server+"/menu"))},{default:n(()=>[t(p,null,{default:n(()=>[t(u)]),_:1}),_(" "+m(o.i18n.menu[o.currentLang]),1)]),_:1}),t(g,{onClick:r[1]||(r[1]=T=>e.$router.push("/"+e.$route.params.server+"/event/"+o.data.eventid))},{default:n(()=>[_(m(o.data.eventName),1)]),_:1}),t(g,null,{default:n(()=>[t(k,{options:o.storyOpts,onSelect:c.pushStory,trigger:"click",class:"storydropdown"},{default:n(()=>[t(w,{type:"info"},{default:n(()=>[_(m(o.data.storyCode)+" "+m(o.data.storyName)+" - "+m(o.data.avgTag)+" ",1),t(p,null,{default:n(()=>[t(y)]),_:1})]),_:1})]),_:1},8,["options","onSelect"])]),_:1})]),_:1}))]),_:1}),!o.data.OPTIONTRACE&&!o.loading?(l(),h(N,{key:0,prefix:"bar",type:"warning"},{default:n(()=>[_(m(o.i18n.optionTraceDisabled[o.currentLang]),1)]),_:1})):R("",!0),(l(!0),f($,null,j(o.data.storyList,(T,ae)=>(l(),f("div",{key:T.id,class:"line",id:"line"+T.id},[T.prop=="name"?(l(),h(L,{key:0,inputline:T,lidx:ae,story:o.data.storyList},null,8,["inputline","lidx","story"])):R("",!0),T.prop=="Subtitle"?(l(),h(D,{key:1,inputline:T},null,8,["inputline"])):R("",!0),T.prop=="Decision"?(l(),h(A,{key:2,inputline:T},null,8,["inputline"])):R("",!0),T.prop=="Predicate"?(l(),h(M,{key:3,inputline:T},null,8,["inputline"])):R("",!0),T.prop=="Delay"&&o.showDelay=="y"?(l(),h(C,{key:4,inputline:T},null,8,["inputline"])):R("",!0),T.prop=="Image"&&T.attributes.image?(l(),h(b,{key:5,inputline:T},null,8,["inputline"])):R("",!0),Dn],8,On))),128))]),_:1},512)]),_:1})}var jn=x($n,[["render",Rn]]);const An=[{path:"/:server",component:ht,children:[{path:"menu",component:Xt,name:"menu"},{path:"event/:event",name:"event",component:tn},{path:"content",name:"content",component:jn}]},{path:"/",redirect:"/zh_CN/menu"}],Jn=Se({history:be(),routes:An}),V=xe(dt);V.use(Ie);V.use(Jn);V.mount("#ASTR");
