import{o as r,c as a,a as g,t as h,n as y,b as $,F as N,r as z,d as _,$ as j,e as d,f as m,g as R}from"./vendor.eaca8ef4.js";const O=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}};O();const D={zh_CN:"\u7B80\u4E2D",en_US:"English",ja_JP:"\u65E5\u672C\u8A9E",ko_KR:"\uD55C\uAD6D\uC5B4",zh_TW:"\u7E41\u4E2D"},x={zh_CN:"\u5F53\u524D\u8BED\u8A00",en_US:"Current Language",ja_JP:"\u73FE\u5728\u306E\u8A00\u8A9E",ko_KR:"\uD604\uC7AC \uC5B8\uC5B4",zh_TW:"\u7576\u524D\u8A9E\u8A00"},A={zh_CN:"\u8BF7\u4ECE\u76EE\u5F55\u4E2D\u9009\u62E9\u6545\u4E8B\u67E5\u770B",en_US:"Select the story you wanna view from the menu",ja_JP:"Select the story you wanna view from the menu",ko_KR:"Select the story you wanna view from the menu",zh_TW:"\u8ACB\u5F9E\u76EE\u9304\u4E2D\u9078\u64C7\u6545\u4E8B\u67E5\u770B"},I={zh_CN:"\u4E3B\u9898\u66F2",en_US:"Maintheme",ja_JP:"Maintheme",ko_KR:"Maintheme",zh_TW:"\u4E3B\u9898\u66F2"},J={zh_CN:"\u522B\u4F20",en_US:"Sidestory",ja_JP:"Sidestory",ko_KR:"Sidestory",zh_TW:"\u522B\u4F20"},U={zh_CN:"\u6545\u4E8B\u96C6",en_US:"Storyset",ja_JP:"Storyset",ko_KR:"Storyset",zh_TW:"\u6545\u4E8B\u96C6"},E={zh_CN:"\u5E72\u5458\u5BC6\u5F55",en_US:"Operators' Records",ja_JP:"Operators' Records",ko_KR:"Operators' Records",zh_TW:"\u5E79\u54E1\u5BC6\u9304"},K={zh_CN:"\u8BBE\u7F6E",en_US:"Settings",ja_JP:"Settings",ko_KR:"Settings",zh_TW:"\u8BBE\u7F6E"},M={zh_CN:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E",en_US:"Reset All Settings",ja_JP:"Reset All Settings",ko_KR:"Reset All Settings",zh_TW:"\u91CD\u7F6E\u6240\u6709\u8BBE\u7F6E"},W={zh_CN:"\u535A\u58EB\u79F0\u547C",en_US:"Doctor's Name",ja_JP:"\u30C9\u30AF\u30BF\u30FC\u306E\u540D\u524D",ko_KR:"Doctor's Name",zh_TW:"\u535A\u58EB\u7A31\u547C"},B={zh_CN:"\u5E94\u7528\u8BBE\u7F6E",en_US:"Apply Setting",ja_JP:"Apply Setting",ko_KR:"Apply Setting",zh_TW:"\u5E94\u7528\u8BBE\u7F6E"};var F={langs:D,currentLang:x,selectStory:A,main:I,ss:J,mini:U,or:E,setting:K,clear:M,dr:W,save:B},v=new URLSearchParams(window.location.search),S=v.get("l"),b=window.localStorage.getItem("doctor"),k=window.localStorage.getItem("hidetip"),C=window.localStorage.getItem("showdelay"),H=v.get("f"),V={eventName:"Loading..."};S||(S="zh_CN");b||(b="{@nickname}");k||(k=!1);C||(C=!0);var p={urlParams:v,l:S,doctor:b,hidetip:k,showDelay:C,storyFile:H,storyData:V,parseContent(e){if(e){const n=/<color=([\w#]+)>(.+?)<\/color>/gm,s='<span style="color:$1">$2</span>';e=e.replaceAll("{@nickname}",this.doctor),e=e.replaceAll("\\n","<br/>"),e=e.replace(n,s)}return e}};var u=(e,n)=>{for(const[s,c]of n)e[s]=c;return e};const q={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(e){return p.parseContent(e)}}},G={class:"textblock"},Q={class:"nameblock"},X=["innerHTML"];function Y(e,n,s,c,t,o){return r(),a("div",G,[g("div",Q,h(t.line.attributes.name),1),g("div",{class:"contentblock",innerHTML:o.parseContent(t.line.attributes.content)},null,8,X)])}var Z=u(q,[["render",Y]]);const ee={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(e){return p.parseContent(e)}}},te=["innerHTML"];function ne(e,n,s,c,t,o){return r(),a("div",{class:y(t.line.prop),style:$({"text-align":t.line.attributes.alignment}),innerHTML:o.parseContent(t.line.attributes.text)},null,14,te)}var oe=u(ee,[["render",ne]]);const re={data(){return{line:this.inputline}},props:{inputline:Object},methods:{parseContent(e){return p.parseContent(e)},changeColor(e,n){var s=document.getElementById(e);setInterval(s.style.setProperty("background-color",n),500)},jumpTo(e){var n=document.getElementById(e);n.scrollIntoView({behavior:"smooth",block:"center"})}}},se=["onClick","innerHTML"];function ie(e,n,s,c,t,o){return r(),a("div",{class:y(t.line.prop)},[(r(!0),a(N,null,z(t.line.attributes.values.split(";"),(l,f)=>(r(),a("div",{key:l,class:"option",onClick:w=>o.jumpTo(t.line.targetLine["option"+l]),innerHTML:o.parseContent(t.line.attributes.options.split(";")[f])},null,8,se))),128))],2)}var ae=u(re,[["render",ie]]);const le={data(){return{line:this.inputline}},props:{inputline:Object}},ce={key:0,class:"optText"},pe={key:2,class:"optText"};function ue(e,n,s,c,t,o){return r(),a("div",{class:y(t.line.prop)},[t.line.endOfOpt?_("",!0):(r(),a("div",ce,"Options: "+h(t.line.attributes.references.replaceAll(";"," ")),1)),t.line.endOfOpt?(r(),a("div",pe,"End of Options")):(r(),a("div",{key:1,class:"toEnd",onClick:n[0]||(n[0]=l=>e.jumpTo(t.line.targetLine)),onMouseover:n[1]||(n[1]=l=>e.changeColor(t.line.targetLine,"rgba(255,255,255,0.4)")),onMouseout:n[2]||(n[2]=l=>e.changeColor(t.line.targetLine,"rgba(0,0,0,0.4)"))},"End of options",32))],2)}var _e=u(le,[["render",ue]]);const de={data(){return{line:this.inputline}},props:{inputline:Object}};function me(e,n,s,c,t,o){return r(),a("div",{class:y(t.line.prop),style:$({height:t.line.attributes.time*30+"px"})},null,6)}var he=u(de,[["render",me]]);const ge={data(){return{line:this.inputline}},props:{inputline:Object}},ye=["src"];function fe(e,n,s,c,t,o){return r(),a("img",{class:"Image",src:"https://aceship.github.io/AN-EN-Tags/img/avg/images/"+t.line.attributes.image+".png"},null,8,ye)}var ve=u(ge,[["render",fe]]);const Se={data(){return{data:p.storyData,path:p.storyFile,lang:p.l,doctor:p.doctor,i18n:F}},created(){j.getJSON("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/"+this.lang+"/gamedata/story/"+this.path+".json").done(e=>this.data=e)},updated(){if(p.urlParams.get("warp")){var e=document.getElementById(p.urlParams.get("warp"));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.style.setProperty("background-color","#f4433633"))}focus()},methods:{jumpTo(e){var n=document.getElementById(e);n.scrollIntoView({behavior:"smooth",block:"center"})},changeColor(e,n){var s=document.getElementById(e);setInterval(s.style.setProperty("background-color",n),500)},getURL(e,n,s){return"?l="+e+"&f="+n+"&warp=line"+s},parseContent(e){return p.parseContent(e)}},components:{Nameline:Z,Subtitle:oe,Decision:ae,Predicate:_e,Dialog:he,Showimg:ve}},be={id:"content"},ke={class:"storydata",id:"storydata"},Ce=["id"],we=["href"],$e=g("div",{style:{clear:"both"}},null,-1);function Ne(e,n,s,c,t,o){const l=d("Nameline"),f=d("Subtitle"),w=d("Decision"),L=d("Predicate"),T=d("Dialog"),P=d("Showimg");return r(),a("div",be,[g("div",ke,h(t.data.eventName)+" "+h(t.data.storyCode)+" "+h(t.data.avgTag)+" "+h(t.data.storyName),1),(r(!0),a(N,null,z(t.data.storyList,i=>(r(),a("div",{key:i.id,class:"line",id:"line"+i.id},[g("a",{href:o.getURL(t.lang,t.path,i.id),class:"linkButton material-icons"},"link",8,we),i.prop=="name"?(r(),m(l,{key:0,inputline:i},null,8,["inputline"])):_("",!0),i.prop=="Subtitle"?(r(),m(f,{key:1,inputline:i},null,8,["inputline"])):_("",!0),i.prop=="Decision"?(r(),m(w,{key:2,inputline:i},null,8,["inputline"])):_("",!0),i.prop=="Predicate"?(r(),m(L,{key:3,inputline:i},null,8,["inputline"])):_("",!0),i.prop=="Dialog"?(r(),m(T,{key:4,inputline:i},null,8,["inputline"])):_("",!0),i.prop=="Image"&&i.attributes.image?(r(),m(P,{key:5})):_("",!0),$e],8,Ce))),128))])}var ze=u(Se,[["render",Ne]]);const Le={data(){return{storyData:{},storyFile:[],lang:[]}},created(){fetch("https://raw.githubusercontent.com/050644zf/ArknightsStoryJson/main/zh_CN/gamedata/story/obt/guide/beg/0_welcome_to_guide.json").then(function(e){e.json()}).then(e=>{this.storyData=e,this.$forceUpdate(),console.log(this.storyData)})},components:{Content:ze},methods:{loadJson(){}}};function Te(e,n,s,c,t,o){const l=d("Content");return r(),m(l)}var Pe=u(Le,[["render",Te]]);R(Pe).mount("#ASTR");console.log(p.urlParams.get("f"));
